webpackJsonp([18],[function(e,t,n){n(208);var i=i||{};i.initTeacher=function(){n(73),n(138),n(141);var e=n(1);e.history.start()},window.JSON?i.initTeacher():n.e(0,function(e){n(42),i.initTeacher()})},,,,,,,,,,,function(e,t,n){var i;i=function(e){var t=n(3),i=n(1),o=n(2),r=n(15),s=n(17),a=n(5),u=n(14),c=n(12),l=n(13),d=n(7),p=n(16),h=n(48),f=d.DOM,g=window.pubnub,m=d.createClass({displayName:"HeaderLeft",propTypes:{blueLogo:d.PropTypes.bool,logoButtonCallback:d.PropTypes.func,hideLeftSide:d.PropTypes.bool},handleClick:function(){var e=this;e.logoButtonClicked()},logoButtonClicked:function(){null===this.props.logoButtonCallback&&this.props.hideLeftSide!==!0?s.navigate("dashboard",!0):o.isFunction(this.props.logoButtonCallback)&&this.props.logoButtonCallback()},render:function(){return f.div({id:"header-logo-container",children:[f.div({id:"header-room-text",children:[f.div({id:"socrative-logo",onClick:this.logoButtonClicked})]})]})}}),v=d.createClass({propTypes:{questionNumber:d.PropTypes.string,hideRoomname:d.PropTypes.bool},getInitialState:function(){var e=this;if(u.waitForSetup(function(){e.setState({roomName:u.get("name")})}),u.has("name"))var t=u.get("name");else var t="";return{roomName:t}},componentWillReceiveProps:function(e){this.setState({roomName:u.get("name")})},render:function(){var e;return e=this.props.hideRoomname===!0?f.span({dangerouslySetInnerHTML:{__html:"&nbsp;"}}):this.state.roomName,this.props.questionNumber&&(e=this.props.questionNumber),f.div({id:"header-content",children:[f.div({id:"header-center-wrapper",children:[f.h3({id:"roomname",children:[f.strong({className:"room",children:gettext("Room")+": ",style:{display:this.props.questionNumber?"none":"inline-block"}}),f.strong({className:"room-name",children:e})]})]})]})}}),A=d.createClass({propTypes:{menuButtonClicked:d.PropTypes.func.isRequired},getInitialState:function(){return{menuColappsed:!0}},handleClick:function(){var e=this;this.props.menuButtonClicked(),t("body").off(),t("body").one("click",function(n){"toggle-drop-menu"!==n.target.className&&t("#account-header-menu").is(":visible")&&e.setState({menuColappsed:!e.state.menuColappsed})}),this.setState({menuColappsed:!this.state.menuColappsed})},handleClearRoomClick:function(){var e=new l;e.render({message:gettext("Clear your room of all students?"),ok:function(){a.clearRoom()}})},handleMyProfileClick:function(){s.navigate("teacher-profile",!0)},handleLogoutClick:function(){var e=new l;e.render({message:gettext("Are you sure you want to logout?"),ok:function(){o.defer(function(){a.logout(),window.location.href="/login/teacher/"})}})},render:function(){return d.initializeTouchEvents(!0),f.div({id:"header-menu-container",children:[f.div({id:"logout-container",className:"clearfix",children:[f.button({id:"show-header-menu",className:"toggle-drop-menu",onClick:this.handleClick,onTouchCancel:this.handleClick,children:[f.i({"data-icon":"j",className:"toggle-drop-menu"}),f.span({id:"menu-button-text",className:"toggle-drop-menu"},gettext("Settings"))]}),f.div({id:"account-header-menu",style:{display:this.state.menuColappsed===!0?"none":"block"},children:[f.i({"data-icon":"f"}),f.ul({id:"settings",children:[f.li({id:"clear-room-button",className:"account-header-button",unselectable:"on",onClick:this.handleClearRoomClick,children:f.h4({id:"dash-clear-room"},gettext("CLEAR ROOM"))}),f.li({id:"teacher-profile-button",className:"account-header-button",unselectable:"on",onClick:this.handleMyProfileClick},f.h4({id:"dash-teacher-profile"},gettext("MY PROFILE"))),f.li({id:"logout-button",className:"account-header-button",unselectable:"on",onClick:this.handleLogoutClick},f.h4({id:"dash-logout"},gettext("LOGOUT")))]})]})]})]})}}),y=d.createClass({propTypes:{buttonClicked:d.PropTypes.func.isRequired,text:d.PropTypes.string},handleClick:function(){p.start("#finish-button"),this.props.buttonClicked()},render:function(){return f.div({id:"header-action-button-container",children:f.button({id:"finish-button",className:"button button-primary",children:"undefined"==typeof this.props.text?gettext("FINISH"):this.props.text,onClick:this.handleClick})})}}),w=d.createClass({propTypes:{buttonClicked:d.PropTypes.func.isRequired},handleClick:function(){this.props.buttonClicked()},render:function(){return f.div({id:"header-action-button-container",children:f.button({id:"finish-create-quiz-button",className:"button button-primary button-small",children:gettext("SAVE & EXIT"),onClick:this.handleClick})})}}),b=d.createClass({render:function(){return f.div({className:"header-final-results-buttons",id:"header-action-button-container",children:[f.button({id:"get-report-button",className:"button button-primary button-small",children:gettext("REPORT")}),f.button({id:"exit-final-results-button",className:"button button-primary button-small",children:gettext("EXIT")})]})}}),C=d.createClass({propTypes:{text:d.PropTypes.string.isRequired},render:function(){return f.div({className:"team-name",children:[gettext("Team")+": ",f.strong({},this.props.text)]})}}),x=d.createClass({propTypes:{hideDrawer:d.PropTypes.bool,dashboardButtonCallback:d.PropTypes.func,manageQuizzesButtonCallback:d.PropTypes.func,activityButtonCallback:d.PropTypes.func,showQuestionButton:d.PropTypes.bool,hideLeftSide:d.PropTypes.bool},getInitialState:function(){function e(){o.isFunction(g.here_now)&&(g.here_now({channel:u.get("name").toLowerCase()+"-student",uuids:!0,callback:function(e){var n=Math.max(0,e.occupancy-1);u.set("occupancy",n),t.setState({occupancy:n})}}),setTimeout(function(){e()},1e4))}var t=this;return u.has("name")&&this.props.hideLeftSide===!1&&(g.subscribe({channel:u.get("name").toLowerCase()+"-student",presence:function(e){var n=Math.max(0,e.occupancy-1);u.set("occupancy",n),t.setState({occupancy:n})},message:function(){}}),e()),c.refresh(function(){t.setState({activity_type:c.get("activity_type")})}),{occupancy:0,activity_type:void 0}},componentWillReceiveProps:function(e){var t=this;c.refresh(function(){t.setState({activity_type:c.get("activity_type")})})},dashboardButtonClicked:function(){null===this.props.dashboardButtonCallback?s.navigate("dashboard",!0):o.isFunction(this.props.dashboardButtonCallback)&&this.props.dashboardButtonCallback()},manageQuizzesButtonClicked:function(){null===this.props.manageQuizzesButtonCallback?s.navigate("manage-quizzes",!0):o.isFunction(this.props.manageQuizzesButtonCallback)&&this.props.manageQuizzesButtonCallback()},activityButtonClicked:function(){null===this.props.activityButtonCallback?-1!==["QZ","1Q"].indexOf(this.state.activity_type)?s.navigate("live-results",!0):"SR"===this.state.activity_type&&r.router.navigate("space-race",!0):o.isFunction(this.props.activityButtonCallback)&&this.props.activityButtonCallback()},questionButtonCallback:function(){t("#take-quiz-master-container, #take-quiz-sidebar").toggleClass("student-navigation")},refreshButtonClicked:function(){window.location.reload()},render:function(){var e=this.props.hideDrawer===!0?"none":"inline-block";if(this.props.showQuestionButton===!0)var t=f.span({id:"expand-sidebar-button-container",children:gettext("Questions")+" â–¶",onClick:this.questionButtonCallback});else if(this.props.hideLeftSide===!1)var n=f.div({id:"students-in-class-wrapper",children:[f.i({"data-icon":"l"}),f.span(null,this.state.occupancy)]});else var t=null,n=null;return f.div({id:"header-drawer",className:"header-drawer-expanded clearfix",children:[t,f.ul({id:"nav",className:"align-left",style:{display:e},children:[f.li({id:"breadcrumb-dashboard-button",unselectable:"on",className:"dashboard"===i.history.fragment?"active":" ",children:f.button({children:[f.i({"data-icon":"o",unselectable:"on"}),f.span(null,gettext("Dashboard"))],onClick:this.dashboardButtonClicked})}),f.li({id:"manage-quizzes-label",unselectable:"on",className:"manage-quizzes"===i.history.fragment?"active":" ",children:f.button({children:[f.i({unselectable:"on","data-icon":"p"}),f.span(null,gettext("Manage Quizzes"))]}),onClick:this.manageQuizzesButtonClicked}),f.li({style:{display:e},unselectable:"on",id:this.state.activity_type?"running-activity":"no-activity",className:"live-results"===i.history.fragment||"space-race"===i.history.fragment?"live-results active":"live-results",children:f.button({children:[f.i({unselectable:"on",className:"live-results-button"}),f.span(null,gettext("Live Results"))]}),onClick:this.activityButtonClicked})]}),f.ul({className:"align-right",id:"header-drawer-right",children:[f.li({children:n}),f.li({id:"refresh-app-button",children:f.button({children:[f.i({"data-icon":"v"}),f.span(null,gettext("Refresh"))]}),onClick:this.refreshButtonClicked})]})]})}}),T=d.createClass({displayName:"HeaderView",propTypes:{options:d.PropTypes.shape({title:d.PropTypes.string,hideMenu:d.PropTypes.bool,hideRoomname:d.PropTypes.bool,hideDrawer:d.PropTypes.bool,hideLeftSide:d.PropTypes.bool,useBlueLogo:d.PropTypes.bool,questionNumber:d.PropTypes.string,menuReplacement:d.PropTypes.string,menuReplacementCallback:d.PropTypes.func,specialHeaderClass:d.PropTypes.string})},getInitialState:function(){return{headerContracted:!0}},menuButtonClicked:function(){this.setState({headerContracted:!this.state.headerContracted})},render:function(){var e="undefined"!=typeof this.props.options?this.props.options:{},t=!o.isUndefined(e.hideMenu)&&e.hideMenu,n=!o.isUndefined(e.hideRoomname)&&e.hideRoomname,i=!o.isUndefined(e.hideDrawer)&&e.hideDrawer,r=o.isUndefined(e.menuReplacement)?"":e.menuReplacement,s=o.isFunction(e.dashboardButtonCallback)?e.dashboardButtonCallback:null,u=o.isFunction(e.manageQuizzesButtonCallback)?e.manageQuizzesButtonCallback:null,c=o.isFunction(e.activityButtonCallback)?e.activityButtonCallback:null,l=o.isFunction(e.logoButtonCallback)?e.logoButtonCallback:null,d=!o.isUndefined(e.hideLeftSide)&&e.hideLeftSide,p=e.showQuestionButton===!0?!0:!1,g=e.useBlueLogo===!0?!0:!1,T={};if(t===!0)if("finish"===r)var T=y({buttonClicked:e.menuReplacementCallback,text:gettext("FINISH")});else if("finishQuiz"===r)var T=y({buttonClicked:e.menuReplacementCallback,text:gettext("FINISH QUIZ")});else if("logout"===r)var T=y({buttonClicked:e.menuReplacementCallback,text:gettext("LOG OUT")});else if("saveExit"===r)var T=w({buttonClicked:e.menuReplacementCallback});else if("final-results"===r)var T=b({});else if("team-name"===r)var T=C({text:h[a.get("team")].name});else var T=null;else var T=A({menuButtonClicked:this.menuButtonClicked});if(o.isString(e.specialHeaderClass))var k=e.specialHeaderClass+" ";else var k="";return f.div({children:[f.div({id:"header",className:"blue-header "+k+" clearfix",children:[m({blueLogo:g,logoButtonCallback:l,hideLeftSide:d}),v({title:e.title?e.title:"Socrative",hideRoomname:n,questionNumber:e.questionNumber}),T]}),x({hideDrawer:i,dashboardButtonCallback:s,manageQuizzesButtonCallback:u,activityButtonCallback:c,hideLeftSide:d,showQuestionButton:p})]})}}),k={};return k.resetAll=function(e){d.renderComponent(T({options:e}),document.getElementById("header-container")),o.isObject(e)&&o.isFunction(e.complete)&&e.complete()},k}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(53),o=n(35),r=n(17),s=n(8),a=n(14),u=n(20),c=n(13),l=n(16),d=new c,p=null,h=function(){return null==p&&(p=n(5)),p},f=new i({defaults:{instance_id:null}});return o.listenFor("student",function(e){f.studentLogout()}),f.studentLogout=function(){h().isTeacher()||(h().logout(),window.location.href="/login/student/")},f.isInProgress=function(){return this.has("activity_id")},f.activityType=function(){return this.get("activity_type")},f.checkBeforeStartingActivity=function(e,n){if(this.isInProgress()){if("1Q"!==this.activityType())return void d.render({message:gettext("You already have an activity in progress. <br> Would you like to start a new one anyway?"),ok:function(){t.isFunction(e)&&e(n)},cancel:function(){l.stop()}});var i=this.get("quiz");if(i&&"FR"===i.questions[0].get("type"))return void d.render({message:gettext("You already have an activity in progress. <br> Would you like to start a new one anyway?"),ok:function(){t.isFunction(e)&&e(n)},cancel:function(){l.stop()}})}t.isFunction(e)&&e(n)},f.resultsPage=function(){var e=f.get("activity_type");return"QZ"===e||"1Q"===e?"live-results":"SR"===e?"space-race":void console.error("Unexpected activity_type: "+e)},f.validateCachedQuiz=function(){if(!f.has("quiz"))return!1;var e=f.get("quiz");return t.isObject(e)&&t.isFunction(e.has)&&t.isFunction(e.get)?e.get("id")!==f.get("activity_id")?(f.unset("quiz"),!1):t.isArray(e.questions)?f.has("qLen")&&e.questions.length!==f.get("qLen")?!1:!0:(console.warn("Got bad quiz data - a quiz with no questions",e),f.unset("quiz"),!0):(console.warn("Quiz is set on localActivity, but it's not a backbone model",e),f.unset("quiz"),!1)},f.getCurrentQuiz=function(e){if(!this.has("activity_id"))return void e(null);if(f.validateCachedQuiz())e(this.get("quiz"));else{var n=new u({id:this.get("activity_id")});n.fetch({success:function(){n.initialize(),f.set("quiz",n),e(n),f.has("quiz")&&t.isUndefined(f.get("quiz").questions)&&console.warn("Got a quiz with no questions",n)}})}},f.getSettings=function(){var e={};return this.has("settings")?(t.each(this.get("settings"),function(t){e[t.key]=t.value}),e.getBooleanSetting=function(e){var n=this[e];return t.isUndefined(n)||!t.isString(n)?!1:"true"===n.toLowerCase()},e):e},f.setStudentName=function(e,n){if(h().isTeacher())throw"Exception: only students should be setting their name";s({url:window.backend_host+"/students/api/set-name/",dataType:"json",type:"POST",data:{activity_instance_id:f.get("id"),user_uuid:h().get("auth_token"),student_name:e},success:function(e,i,o){t.isFunction(n)&&n()},error:function(e,t,n){analytics.track("Error:SetStudentName",{error:e}),console.error(e),console.error(t),console.error(n)}})},f.reset=function(){f.__hasRefreshed=!1,f.__refreshing=!1,f.__refreshingCallbacks=[],f.clear()},f.__hasRefreshed=!1,f.__refreshing=!1,f.__refreshingCallbacks=[],f.refresh=function(e){if(this.__hasRefreshed)return void t.defer(function(){e(this)});if(this.__refreshingCallbacks.push(e),!this.__refreshing){var n=this;this.__refreshing=!0,this.__refresh(function(e){n.__refreshing=!1,n.__hasRefreshed=!0,t.each(n.__refreshingCallbacks,function(t){t(e)}),n.__refreshingCallbacks.length=0})}},f.__refresh=function(e){var n=this,i=function(){var i=function(){t.isUndefined(e)||e(n)};if(n.has("started_time"))i();else{var o=h().get("auth_token"),r=a.get("name");if(t.isUndefined(o)||t.isUndefined(r))throw"InvalidOperationException: auth_token and room_name need to be set before loading the local activity.";s({url:window.backend_host+"/rooms/api/current-activity/{0}/{1}/".format(o,r),dataType:"json",type:"GET",success:function(e,o,r){if(!e)return void i();var s={};for(var a in e.student_names){var c=e.student_names[a];s[c.user_uuid]=c.name}e.student_names=s,n.set(e),f.has("quiz")?(t.isUndefined(f.get("quiz").cid)&&f.set("quiz",new u(f.get("quiz"))),i()):i()},error:function(e,t,n){analytics.track("Error:RefreshActivity",{error:e}),console.error(e),console.error(t),console.error(n)}})}};a.has("name")?i():a.waitForSetup(i)},f.getStudentResponses=function(e,n,i){if(t.isUndefined(e))throw"Invalid Operation Exception: success callback required";if(t.isUndefined(i))var i=window.backend_host+"/students/api/find-question-responses/{0}/{1}/".format(f.get("id"),h().get("auth_token"));s({url:i,dataType:"json",type:"GET",success:function(t,n,i){f.set("responses",t),e(t)},error:function(e,i,o){t.isUndefined(n)?(analytics.track("Error:GetStudentResponses",{error:e}),console.error(e),console.error(i),console.error(o)):n(f)}})},f.__onActivityEndedCallbacks=[],f.onNextActivityEnded=function(e){f.__onActivityEndedCallbacks.push(e)},o.listenFor("localActivity",function(e){var n=h();n.unset("team"),"activity_ended"===e?(f.clear({silent:!0}),f.set("instance_id",null),n.unset("user_input_name"),t.each(f.__onActivityEndedCallbacks,function(e){e()}),n.isTeacher()||r.navigate("student-dashboard",!0)):(f.set({activity_starting:!0},{silent:!0}),f.set(e))}),o.listenFor("studentResponse",function(e){if(t.isString(e)&&(e=JSON.parse(e)),console.log(e),t.isString(e.student_name)&&f.studentNameSet({user_uuid:e.user_uuid,student_name:e.student_name}),e.activity_instance===f.get("id"))if(f.has("responses")){var n=t.clone(f.get("responses")),i=t.findWhere(n,{id:e.id});if(t.isUndefined(i)||null===i||f.getSettings().allow_repeat_responses)n.push(e);else{var o=n.indexOf(i);if(-1===o)throw"Something went wrong finding the existing response";n[o]=e}f.set("responses",n)}else f.set("responses",[e])}),f.hideResponse=function(e){if(f.has("responses")){var n=t.findWhere(f.get("responses"),{id:e});t.isUndefined(n)?console.warn("Attempted to hide response but it did not exist",e):(n.hidden=!0,s({url:window.backend_host+"/students/api/hide-response/",type:"POST",data:{response_id:e,room_name:a.get("name")},error:function(e,t,i){analytics.track("Error:HideResponse",{response:n,error:e}),console.error(e),console.error(t),console.error(i)}}))}else console.warn("Attempted to hide response but the local activity has no responses",e)},o.listenFor("studentNameSet",function(e){f.studentNameSet(e)}),f.studentNameSet=function(e){var n={};f.has("student_names")&&t.extend(n,f.get("student_names")),n[e.user_uuid]=e.student_name,f.set("student_names",n)},f.forceChangeEvent=function(){this.set("force_change",Math.random())},f.nameForLocalUser=function(){return f.get("student_names")[h().get("auth_token")]},f.setCompleted=function(e){s({url:window.backend_host+"/rooms/api/end-current-activity/",type:"POST",data:{user_uuid:h().get("auth_token"),room_name:a.get("name")},success:function(n,i,o){f.unset("student_names",{silent:!0}),f.unset("responses",{silent:!0}),f.clear(),t.isFunction(e)&&e()},error:function(e,t,n){analytics.track("Error:CompletedActivity",{error:e}),console.error(e),console.error(t),console.error(n)}})},f.startQuiz=function(e){if(t.isUndefined(e)||t.isUndefined(e.socNumber))throw"ArgumentException";var n={room_name:a.get("name"),auth_token:h().get("auth_token"),soc_num:e.socNumber};t.extend(n,e.settings),console.log("Starting Quiz with data:",n),this.checkBeforeStartingActivity(function(e){f.unset("responses",{silent:!0}),f.set("students_finished",""),s({url:window.backend_host+"/lecturers/api/start-quiz/",dataType:"json",type:"POST",data:n,success:function(n,i,o){f.set(n,{silent:!0}),t.isFunction(e.success)&&e.success()},error:function(e,t,n){analytics.track("Error:StartedQuiz",{error:e}),console.error(e),console.error(t),console.error(n)}})},e)},f.startQuickQuestion=function(e){var n={room_name:a.get("name"),user_uuid:h().get("auth_token"),question_type:e.type,question_text:e.text,allow_repeat_responses:e.allow_repeat_responses,disable_names:e.disable_names};this.checkBeforeStartingActivity(function(e){f.unset("responses",{silent:!0}),s({url:window.backend_host+"/lecturers/api/start-quick-question/",dataType:"json",type:"POST",data:n,success:function(n,i,o){f.set(n,{silent:!0}),t.isFunction(e.callback)&&e.callback()},error:function(e,t,n){analytics.track("Error:StartedQuickQuestion",{error:e}),console.error(e),console.error(t),console.error(n)}})},e)},f.convertCurrentQuickQuestionToSurvey=function(e){if("1Q"!==f.get("activity_type"))throw"InvalidOperationException: cannot convert the current activity to a survey, it isn't a Quick Question";s({url:window.backend_host+"/lecturers/api/convert-quick-question-to-vote/",dataType:"json",type:"POST",data:{room_name:a.get("name"),user_uuid:h().get("auth_token")},success:function(n,i,o){f.set(n,{silent:!0}),t.isFunction(e)&&e()},error:function(e,t,n){analytics.track("Error:ConvertQuickQuestionToVote",{error:e}),console.error(e),console.error(t),console.error(n)}})},f.startSpaceRace=function(e){if(t.isUndefined(e)||t.isUndefined(e.socNumber))throw"ArgumentException";this.checkBeforeStartingActivity(function(e){f.unset("responses",{silent:!0}),s({url:window.backend_host+"/lecturers/api/start-space-race/",dataType:"json",type:"POST",data:{room_name:a.get("name"),auth_token:h().get("auth_token"),soc_num:e.socNumber,team_count:e.teamCount,team_assignment_type:e.teamAssignment,disable_feedback:e.disable_feedback,iconType:e.iconType},success:function(n,i,o){f.set(n,{silent:!0}),t.isFunction(e.success)&&e.success()},error:function(e,t,n){analytics.track("Error:StartSpaceRace",{error:e}),console.error(e),console.error(t),console.error(n)}})},e)},f.startExitTicket=function(e){this.checkBeforeStartingActivity(function(e){f.unset("responses",{silent:!0}),f.set("students_finished",""),s({url:window.backend_host+"/lecturers/api/start-exit-ticket/",dataType:"json",type:"POST",data:{room_name:a.get("name"),auth_token:h().get("auth_token")},success:function(n,i,o){f.set(n,{silent:!0}),t.isObject(e)&&t.isFunction(e.success)&&e.success()},error:function(e,t,n){analytics.track("Error:startExitTicket",{error:e}),console.error(e),console.error(t),console.error(n)}})},e)},f}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,o;i=[n(3),n(2),n(1),n(9)],o=function(e,t,n,i){var o=n.View.extend({render:function(n){var o=this;e("#main-content").append("<div id='confirm-message-container'></div>"),this._alertcontainer=e("#confirm-message-container"),i.render(window.server_host+"/common/confirm-message/",this._alertcontainer,function(){e("#confirm-message-pop-up-message").html(n.message);var i=e("#confirm-ok-button"),r=e("#confirm-cancel-button");n.okBtn?i.html(n.okBtn):n.okButton&&(i.html(n.okButton),n.okButton.length>9&&i.css({width:"35%"})),n.cancelBtn?r.html('<i class="close-popup" data-icon="h"></i>'):n.cancelButton&&r.html('<i  class="close-popup" data-icon="h"></i>'),i.one("click",function(){t.isFunction(n.ok)&&n.ok(),o.cleanup()}),r.one("click",function(){t.isFunction(n.cancel)&&n.cancel(),o.cleanup()}),e("#reports-pop-up").one("click",function(){"ok"===n.backgroundClick?t.isFunction(n.ok)&&n.ok():t.isFunction(n.cancel)&&n.cancel(),o.cleanup()}),e("#confirm-message-pop-up-box").on("click",function(e){e.stopPropagation()}),e(document).bind("keydown",function(e){27==e.keyCode&&(t.isFunction(n.cancel)&&n.cancel(),o.cleanup())})})},cleanup:function(){e(document).off("keydown"),this._alertcontainer.remove(),this._alertcontainer=null}});return o}.apply(t,i),!(void 0!==o&&(e.exports=o))},,function(e,t,n){var i;i=function(e){var t=n(3),i=n(2),o=n(9),r=n(61),s=n(5),a=n(17),u={templates:o,colors:r,router:a,selectOne:function(e){var n=t(e);if(1!==n.length)throw"Exception: attempted to select 1 element on the page with '"+e+"' but found "+n.length;return n},requireLoggedIn:function(e){if("teacher"!==e&&"student"!==e)throw"ArgumentException: role must be 'teacher' or 'student'";return s.isAuthenticated()||s.getCookieData(),("teacher"!==e||s.isTeacher())&&("student"!==e||s.isAuthenticated())?!0:(window.location.href="/",!1)},randomHex:function(e){return(new Array(e).join(0)+parseInt(Math.pow(2,4*e)*Math.random()).toString(16)).slice(-e)},escapeHtmlTags:function(e){return i.escape(e)}};return u}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,function(e,t,n){var i,o;i=[n(1),n(18)],o=function(e,t){var n=e.Router.extend({initialize:function(){this.controller=t}});return new n}.apply(t,i),!(void 0!==o&&(e.exports=o))},,,function(e,t,n){var i;i=function(e){var t=n(1),i=n(8),o=n(2),r=n(23),s=n(41),a={},u=n(5),c=t.Model.extend({urlRoot:function(){return(o.isUndefined(this.get("isTeacher"))||o.isUndefined(this.get("auth_token")))&&(this.set("auth_token",u.get("auth_token")),this.set("isTeacher",u.isTeacher())),this.get("isTeacher")===!0?window.backend_host+"/quizzes/api/quiz/{0}/".format(this.get("auth_token")):window.backend_host+"/quizzes/api/quiz/"},initialize:function(){var e=this;if(this.has("questions")){var e=this;a=n(12),o.isUndefined(u)&&(u=n(5)),this.set("auth_token",u.get("auth_token")),this.set("isTeacher",u.isTeacher()),this.questions=[],o.each(this.get("questions"),function(t){e.questions.push(new r(t))}),!this.get("isTeacher")&&a.getSettings().getBooleanSetting("random_questions")?this.questions=o.shuffle(this.questions):this.questions=o.sortBy(this.questions,function(e){return e.get("order")}),this.unset("questions")}e.has("tag")?(e.tags=this.get("tag"),this.unset("tag")):e.tags=[]},addNewQuestion:function(e,t){if(!this.has("id"))throw"Exception: quiz has no id, cannot add question";var n={type:e.toUpperCase(),order:this.questions.length+1,quiz_id:this.get("id"),answers:[],explanation:"",grading_weight:1,has_correct_answer:!1,question_text:"",resources:[]},i=new r(n);i.set("dirty",!0),this.questions.push(i);for(var s=0;s<this.questions.length;++s){var a=s+1;this.questions[s].get("order")!=a&&this.questions[s].set("order",a)}o.isFunction(t)&&t()},removeQuestion:function(e){this.questions=o.filter(this.questions,function(t){return t.cid!==e.cid}),e.off(),e.destroy();for(var t=0;t<this.questions.length;++t){var n=t+1;this.questions[t].get("order")!=n&&this.questions[t].set("order",n)}},cloneQuestion:function(e){var t=this,n=[];o.each(e.answers,function(e){var t=e.toJSON();delete t.id,n.push(t)});var i=[];e.resources&&0!=e.resources.length&&i.push({url:e.resources[0].get("url")});var s={type:e.get("type").toUpperCase(),order:e.get("order")+1,quiz_id:t.get("id"),answers:n,explanation:e.get("explanation"),grading_weight:1,has_correct_answer:e.get("has_correct_answer"),question_text:e.get("question_text"),resources:i,duplicate:!0},a=new r(s);a.set("dirty",!0),this.questions.splice(a.get("order")-1,0,a),this.questions=o.sortBy(this.questions,function(e){return e.get("order")});for(var u=0;u<this.questions.length;++u){var c=u+1;this.questions[u].get("order")!=c&&this.questions[u].set("order",c)}a.save(null,{success:function(){console.log("SAVE done "+JSON.stringify(a)),t.sortQuestions()}})},sortQuestions:function(){this.questions=o.sortBy(this.questions,function(e){return e.get("order")});for(var e=0;e<this.questions.length;++e){var t=e+1;this.questions[e].get("order")!=t&&this.questions[e].set("order",t)}var n={},r=[];o.each(this.questions,function(e){var t={};t.question_id=e.get("question_id"),t.order=e.get("order"),r.push(t)}),n={auth_token:u.get("auth_token"),quiz_id:this.get("id"),orders:r},n=JSON.stringify(n),i({url:window.backend_host+"/quizzes/api/question-reorder/",type:"POST",contentType:"application/json",data:n,success:function(e,t,n){console.log("Reorder Success")},error:function(e,t,n){console.log("Reorder Error")}})},toJSON:function(e){var n=t.Model.prototype.toJSON.call(this);return e||o.isUndefined(n.questions)?e&&(n.questions=[],o.each(this.questions,function(t){n.questions.push(t.toJSON(e))})):delete n.questions,this.has("tag")&&(n.tag=[],o.each(this.tag,function(e){n.tag.push(e.toJSON())})),n},save:function(e,t){return this.unset("questions"),this.has("dirty")&&this.get("dirty")?(this.unset("dirty"),s.save(this,e,t)):!1}});return c}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,,function(e,t,n){var i;i=function(e){var t=n(1),i=n(2),o=n(28),r=n(54),s=n(41),a=n(8),u=n(5);t.ajax=function(){var e=Array.prototype.slice.call(arguments,0);return a.apply(t.$.ajax,e)};var c=t.Model.extend({urlRoot:function(){return this.get("isTeacher")&&this.has("question_id")?window.backend_host+"/quizzes/api/questions/{0}/".format(this.get("auth_token")):window.backend_host+"/quizzes/api/questions/"},idAttribute:"question_id",initialize:function(){if(this.has("answers")){var e=this;this.answers=[];var t=this.get("question_id");i.each(this.get("answers"),function(t){e.addAnswer(new o(t))}),this.unset("answers")}if(this.has("resources")){var e=this;this.resources=[];var t=this.get("question_id");i.each(this.get("resources"),function(n){var i=new r(n);i.set("question_id",t),e.resources.push(i)}),this.unset("resources")}if(i.isUndefined(s))var s=n(5);this.set("auth_token",s.get("auth_token")),this.set("isTeacher",s.isTeacher()),this.set("dirty",!1)},nextAnswerOrder:function(){return i.reduce(this.answers,function(e,t){var n=t.get("order");return null==e||n>e?n:null!=e?e:0},null)+1},addAnswer:function(e){e.has("order")||e.set("order",this.nextAnswerOrder()),this.set("dirty",!0),this.answers.push(e),this.sortAnswers()},removeAnswer:function(e){0!==this.answers.length&&("undefined"==typeof e&&(e=i.last(this.answers)),this.answers=i.filter(this.answers,function(t){return t.cid!==e.cid}),e.off(),this.sortAnswers(),this.set("dirty",!0))},sortAnswers:function(){i.sortBy(this.answers,function(e){return e.get("order")});for(var e=0;e<this.answers.length;++e){var t=e+1;this.answers[e].order!=t&&(this.answers[e].order=t)}},toJSON:function(e){var n=t.Model.prototype.toJSON.call(this);return i.isUndefined(e)?(i.isUndefined(n.answers)||delete n.answers,i.isUndefined(n.resources)||delete n.resources):e&&(n.answers=[],n.resources=[],i.each(this.answers,function(t){n.answers.push(t.toJSON(e))}),i.each(this.resources,function(t){n.resources.push(t.toJSON(e))})),n},save:function(e,t){return this.has("dirty")&&this.get("dirty")?(this.has("auth_token")||this.set("auth_token",u.get("auth_token")),this.unset("dirty"),s.save(this,e,t)):!1}});return c}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,,,,function(e,t,n){var i;i=function(e){var t=n(1),i=t.Model.extend({});return i}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,,,function(e,t,n){var i,o;i=[n(3),n(2),n(1),n(9)],o=function(e,t,n,i){var o=n.View.extend({render:function(n){var o=this;e("#main-content").append("<div id='success-message-container'></div>"),this._messagecontainer=e("#success-message-container"),i.render(window.server_host+"/common/success-message/",this._messagecontainer,function(){e("#success-message-pop-up-message").html(n.message),e("#success-message-pop-up-button").one("click",function(){o.cleanup(),t.isFunction(n.ok)&&n.ok()}),e("#success-message-pop-up-box").on("click",function(e){e.stopPropagation()}),e(document).bind("keydown",function(e){if(27==e.keyCode){if(o.cleanup(),!t.isFunction(n.ok))return;n.ok()}}),e("#reports-pop-up").one("click",function(){o.cleanup(),t.isFunction(n.ok)&&n.ok()}),e(".cancel-button").one("click",function(){o.cleanup(),t.isFunction(n.ok)&&n.ok()}),o.trigger("Render")})},cleanup:function(){e(document).off("keydown"),this._messagecontainer.remove(),this._messagecontainer=null}});return o}.apply(t,i),!(void 0!==o&&(e.exports=o))},,,,function(e,t,n){var i,o;i=[n(2)],o=function(e){var t={_init:function(){var e=this;this.environment="Browser",this.browser=this._searchString(this._dataBrowser)||"Other",this.version=this._searchVersion(navigator.userAgent)||this._searchVersion(navigator.appVersion)||"Unknown",this.platform=navigator.platform,this.touchDevice="ontouchstart"in window,this.isMobileBrowser=!1,this.isAndroidApp=!1,this.isIosApp=!1,this.isWindowsApp=!1;for(var t=["iPhone","iPod","iPad","Android","Linux"],n=t.length,i=n-1;i>=0;i--)if(-1!==this.platform.indexOf(t[i])){if("Linux"==t[i]){e.isMobileBrowser=null!==navigator.userAgent.match(/Android/i)?!0:!1;break}e.isMobileBrowser=!0;break}var o=document.URL.indexOf("android.socrative")>-1;o?this.isAndroidApp=!0:this.isAndroidApp=!1;var r=document.URL.indexOf("ios.socrative")>-1;r?this.isIosApp=!0:this.isIosApp=!1;var s=document.URL.indexOf("windows.socrative")>-1;s?this.isWindowsApp=!0:this.isWindowsApp=!1},_searchString:function(e){for(var t=0;t<e.length;++t){var n=e[t].string;if(this._versionSearchString=e[t].subString,-1!=n.indexOf(e[t].subString))return e[t].identity}},_searchVersion:function(e){var t=e.indexOf(this._versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this._versionSearchString.length+1))},_dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"}]};return t._init(),t}.apply(t,i),!(void 0!==o&&(e.exports=o));
},,,,,function(e,t,n){var i;i=function(e){var t=n(1),i=n(3),o=n(2),r=n(10),s=window.localStorage,a={};return a.saveToLocalStorage=function(e){e.has("id")&&o.isString(e.name)&&s.setItem(e.name+"-"+String(e.get("id")),JSON.stringify(e.toJSON()))},a.submitBtn=function(){i("#final-answer-button").attr("disabled","disabled").html('<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>')},a.restoreButtonText=function(){i("#final-answer-button").removeAttr("disabled").html("<span>"+gettext("Submit Answer")+"</span>")},a.save=function(e,n,i){var o=this;if(o.submitBtn(),n&&"undefined"!=typeof n||(n=null),i&&"undefined"!=typeof i||(i={}),"function"==typeof i.success)var s=i.success;else var s=function(){};if("function"==typeof i.error)var a=i.success;else var a=function(){};i.success=function(e,t){o.restoreButtonText(),s(e,t)};var u=0;return i.error=function(s,c){if(400===c.status,500===c.status){var l=new r;return void l.render({message:gettext("Your latest changes might not have been saved. Please try again or contact Socrative.")})}setTimeout(function(){if(2>=u)u++,t.Model.prototype.save.call(e,n,i);else{var s=new r;s.render({message:gettext("Your latest changes might not have been saved. Please refresh the page."),ok:function(){o.restoreButtonText()}})}},5e3),a(s,c)},t.Model.prototype.save.call(e,n,i)},a}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,,,,,,function(e,t,n){var i,o;i=[],o=function(){var e=[{cssStyle:"Blue-team",name:gettext("Blue"),color:"#276baa",secondaryColor:"#337abc"},{cssStyle:"Magenta-team",name:gettext("Magenta"),color:"#ca2692",secondaryColor:"#d84585"},{cssStyle:"Lime-team",name:gettext("Lime"),color:"#a2d35d",secondaryColor:"#caed6a"},{cssStyle:"Peach-team",name:gettext("Peach"),color:"#fcbc89",secondaryColor:"#fecca5"},{cssStyle:"Violet-team",name:gettext("Violet"),color:"#7d3990",secondaryColor:"#9148a5"},{cssStyle:"Teal-team",name:gettext("Teal"),color:"#258a8c",secondaryColor:"#2d9698"},{cssStyle:"Indigo-team",name:gettext("Indigo"),color:"#5f82c2",secondaryColor:"#7092d1"},{cssStyle:"Orange-team",name:gettext("Orange"),color:"#d76d2c",secondaryColor:"#e57a39"},{cssStyle:"Red-team",name:gettext("Red"),color:"#b83b24",secondaryColor:"#c54730"},{cssStyle:"Silver-team",name:gettext("Silver"),color:"#5c646e",secondaryColor:"#798390"},{cssStyle:"Green-team",name:gettext("Green"),color:"#4fa45e",secondaryColor:"#5cb86c"},{cssStyle:"Rose-team",name:gettext("Rose"),color:"#ec7c90",secondaryColor:"#f893a5"},{cssStyle:"Gold-team",name:gettext("Gold"),color:"#ba8324",secondaryColor:"#d59a35"},{cssStyle:"Maroon-team",name:gettext("Maroon"),color:"#9d3444",secondaryColor:"#ad3a4c"},{cssStyle:"Yellow-team",name:gettext("Yellow"),color:"#fbdb45",secondaryColor:"#fbdf5d"},{cssStyle:"Tan-team",name:gettext("Tan"),color:"#D2B48C",secondaryColor:"#c39e6c"},{cssStyle:"Hot Pink-team",name:gettext("Hot Pink"),color:"#e602e7",secondaryColor:"#b700b8"},{cssStyle:"Sienna-team",name:gettext("Sienna"),color:"#e18942",secondaryColor:"#EAAA76"},{cssStyle:"Dimgray-team",name:gettext("Dimgray"),color:"#c3c3c3",secondaryColor:"#A6A6A6"},{cssStyle:"Crimson-team",name:gettext("Crimson"),color:"#990000",secondaryColor:"#800000"}];return e}.apply(t,i),!(void 0!==o&&(e.exports=o))},,,,,function(e,t,n){var i,o;i=[n(1)],o=function(e){var t=e.Model.extend({});return t}.apply(t,i),!(void 0!==o&&(e.exports=o))},function(e,t,n){var i,o;i=[n(1),n(5),n(23)],o=function(e,t,n){var i=e.Model.extend({urlRoot:function(){return t.isTeacher()?window.backend_host+"/common/api/media-resources/{0}/{1}/".format(t.get("auth_token"),n.get("question_id")):window.backend_host+"/common/api/media-resources/"}});return i}.apply(t,i),!(void 0!==o&&(e.exports=o))},function(e,t,n){var i;i=function(e){var t=n(2),i=null,o=n(48),r=n(20),s=Backbone.Model.extend({initialize:function(e){if(t.isUndefined(e)||t.isUndefined(e.localActivity))throw"results should receive a local activity. Got: "+e;i=e.localActivity},getCurrentResponses:function(){return i.has("responses")?t.filter(i.get("responses"),function(e){return e.hidden!==!0}):[]},getCurrentQuestion:function(e){var n=-1;if(n=t.isUndefined(e)||null===e?i.get("activity_state"):e-1,!i.has("quiz")||t.isUndefined(n)||null===n)return null;var o=i.get("quiz").questions;n=n.clamp(0,o.length);var r=o[n];if(!t.isUndefined(r.resources[0])&&-1==r.resources[0].get("url").indexOf("s3.amazonaws.com")){var s=r.resources[0].get("url");r.resources[0].set("url","http://s3.amazonaws.com/socrative/"+s)}return t.isFunction(r.toJSON)&&(r=r.toJSON(!0)),r},buildTeacherPacedResponseContext:function(e){var n=this.getCurrentQuestion(e);if(null===n)return null;var o=t.filter(this.getCurrentResponses(),function(e){return e.question===n.question_id&&e.hidden===!1}),r=!0,s=!0,a=t.uniq(t.pluck(o,"user_uuid")),u={question:n,responses:o,totalStudents:Object.keys(i.get("student_names")).length||a.length,showNames:r,showAnswers:s,activityType:i.get("activity_type")};if(u.studentsAnswered=a.length,"FR"!==n.type){var c={};t.each(n.answers,function(e){c[e.id]=[]});var l=0;t.each(o,function(e){t.each(e.selection_answers,function(t){c[t.answer_id].push(e),l++}),e._showName=r,e._showAnswer=s}),u.aggregate_responses=[];var d=0;if(t.each(n.answers,function(e){var t={};t.percent_selected=c[e.id].length/l,t.order=e.order,t.is_correct=e.is_correct,t.text=e.text,u.aggregate_responses[d]=t,++d}),"1Q"===u.activityType&&"MC"===u.question.type){u.aggregate_responses=t.sortBy(u.aggregate_responses,"order");var p=t.countBy(n.answers,function(e){return""===e.text});if(5!==n.answers.length||5!==p["true"]){var h=t.groupBy(u.aggregate_responses,function(e){return isNaN(e.percent_selected)||0===e.percent_selected});h["false"]=t.sortBy(h["false"],"percent_selected"),h["false"].reverse(),u.aggregate_responses=[],u.aggregate_responses.push.apply(u.aggregate_responses,h["false"]),u.aggregate_responses.push.apply(u.aggregate_responses,h["true"])}}else u.aggregate_responses=t.sortBy(u.aggregate_responses,function(e){return e.order})}else this.setResponseNames(u);return u},setResponseNames:function(e){var n=i.get("student_names");t.each(e.responses,function(e){e.student_name=n[e.user_uuid]})},buildLiveResultsTemplateContext:function(e){var n=new r(i.get("quiz")),o=i.get("quiz").questions,s=o.length,a=t.countBy(o,function(e){return e.get("has_correct_answer")===!0}),u={};t.each(o,function(e){t.isFunction(e.has)&&(e=e.toJSON(!0)),t.each(e.answers,function(t){u[t.id]={text:t.text,order:t.order,type:e.type}})});var c=function(e){if(e>26){var t="A".charCodeAt(0),n="";do e-=1,n=String.fromCharCode(t+e%26)+n,e=e/26>>0;while(e>0)}else var n=String.fromCharCode("A".charCodeAt(0)+e-1);return n},l={};t.each(this.getCurrentResponses(),function(e){var n=l[e.user_uuid];t.isUndefined(n)?l[e.user_uuid]=[e]:n.push(e),e.selection_answers.length>0?e.text=t.map(e.selection_answers,function(e){var n=u[e.answer_id];if(t.isUndefined(n))return console.warn("Cannot find Answer Info for Selection: ",e),"";if("MC"===n.type){var i=c(u[e.answer_id].order);return i}return n.text}).join(", "):e.text_answers.length>0&&(e.text=t.pluck(e.text_answers,"answer_text").join(", "))});var d=[],p=[];i.has("student_names")&&(p=i.get("student_names"));for(uuid in p)if("undefined"!==uuid){var h=p[uuid],f=0,g=0;t.isUndefined(l[uuid])||(t.each(l[uuid],function(e){e.is_correct===!0&&f++}),t.each(l[uuid],function(e){(e.is_correct===!0||null===e.is_correct||e.is_correct===!1)&&g++})),d.push({name:h,grade:f/a["true"],uuid:uuid,finalProgress:g/s})}t.each(n.questions,function(e){var n=0,i=0;t.each(d,function(o){var r=t.find(l[o.uuid],function(t){return t.question===e.get("id")});t.isUndefined(r)||(r.is_correct===!0?(n+=1,i+=1):r.is_correct===!1&&(n+=1))}),i/=n,e.set("averageCorrect",i),e.set("incorrectOrCorrectAnswers",n)}),d=t.sortBy(d,function(e){return e.name.toLowerCase()}),e!==!0&&d.reverse();var m={quiz:n.toJSON(!0),responses:l,studentInfos:d};return this.setResponseNames(m),m},buildSpaceRaceContext:function(){if(!i.has("quiz"))return null;var e=[];t.each(this.getCurrentResponses(),function(n){var i=e[n.team];t.isUndefined(i)?e[n.team]=[n]:i.push(n)});var n,r,s,a;i.has("settings")&&(n=t.find(i.get("settings"),function(e){return"team_count"===e.key}),s=t.find(i.get("settings"),function(e){return"icon_type"===e.key})),"undefined"!=typeof n&&(r=n.value),"undefined"!=typeof s&&(a=s.value);for(var u={teams:[]},c=t.filter(i.get("quiz").toJSON(!0).questions,function(e){return e.has_correct_answer}),l=.98,d=l/c.length,p=0;r>p;++p){var h=o[p],f=e[p],g=t.reduce(c,function(e,n){var i=t.findWhere(f,{is_correct:!0,question:n.question_id});return t.isUndefined(i)?e:e+d},0);g=g.clamp(0,l),u.teams.push({name:h.name,color:h.color,secondaryColor:h.secondaryColor,completePercentage:g})}return u.iconType=a,u}});return s}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(3),i=n(1),o=n(2),r=n(9),s=n(8),a=n(5),u=n(36),c=n(17),l=n(10),d=n(32),p=n(16),h=i.View.extend({el:null,reportHeader:null,aid:null,qid:null,deliveryMethod:null,selectedReports:[],downloadChartReport:null,initialize:function(e){(!o.isUndefined(e)||o.isObject(e))&&this.render(e)},render:function(e){var n=this;if(o.isUndefined(e.aid)||o.isUndefined(e.qid))throw"ReportSettingsView should receive an activity id and a quiz id. Got: "+e;this.aid=e.aid,this.qid=e.qid,t("#main-content").after("<div id='reports-popup'></div>");var i={};"Explorer"===u.browser&&8===u.version?i.isIE8=!0:i.isIE8=!1,this.el=t("div#reports-popup"),r.render("/live-results/report/",n.el,i,function(){n.selectedReports=[],n.setupSettingsButtons(e),n.setupCloseModal()})},setupSettingsButtons:function(e){var n=this,i=n.el.find(".report-settings-heading-icons"),r=n.el.find(".report-type-container"),s=n.el.find(".report-type"),c=function(e){i.find("div").each(function(n,i){t(i).is(e)?t(i).removeClass("disabled").addClass("selected"):t(i).addClass("disabled")})};if(i.find("#get-report").click(function(){c(this),t("#whole-class-excel").prop({checked:!0}),n.selectedReports.push("whole-class-excel"),e.allowPdfReports===!1&&t("#all-students, #whole-class").attr("disabled",!0).parents(".report-settings-option").addClass("disabled"),s.show()}),o.isUndefined(e.allowViewChart)||e.allowViewChart!==!0){var l=i.find("#report-view-chart");l.addClass("not-allowed"),"Explorer"===u.browser&&9!==u.version&&l.addClass("ie-disabled")}else i.find("#report-view-chart").click(function(){t(this).hasClass("disabled")?(s.hide(),i.find("#get-report").removeClass("selected"),i.find("#report-view-later").removeClass("disabled"),t(this).removeClass("disabled")):n.viewChart(e.callback)});if(!o.isUndefined(e.allowViewLater)&&e.allowViewLater)i.find("#report-view-later").click(function(){t(this).hasClass("disabled")?(s.hide(),i.find("#report-view-chart").removeClass("disabled"),i.find("#get-report").removeClass("selected"),t(this).removeClass("disabled")):n.viewLater(e.callback)});else{var l=i.find("#report-view-later");l.addClass("not-allowed"),"Explorer"===u.browser&&9!==u.version&&l.addClass("ie-disabled")}if(s.find(":checkbox").change(function(){if(t(this).prop("checked"))n.selectedReports.push(t(this).attr("id"));else{var e=n.selectedReports.indexOf(t(this).attr("id"));-1!==e&&n.selectedReports.splice(e,1)}0===n.selectedReports.length?r.find(".report-option").each(function(e,n){t(n).addClass("disabled")}):r.find(".report-option").each(function(e,n){t(n).removeClass("disabled")})}),r.find("#report-email").click(function(){t(this).hasClass("disabled")||n.emailActivity(e.callback)}),u.isMobileBrowser===!1&&u.isAndroidApp===!1&&u.isIosApp===!1&&u.isWindowsApp===!1?r.find("#report-download").click(function(){t(this).hasClass("disabled")||(e.downloadChartReport!==!1?n.downloadReport(e.callback,!0):n.downloadReport(e.callback,!1))}):r.find("#report-download").addClass("not-allowed"),a.get("googleUser")){if(t(this).hasClass("disabled"))return;r.find("#report-google-drive").click(function(){n.sendToGoogleDrive(e.callback)})}else r.find("#report-google-drive").addClass("not-allowed");t("#report-settings-exit").on("click",function(){n.closeModal(n)}),t("#report-settings").on("click",function(){n.closeModal(n)}),t("#report-modal").on("click",function(e){e.stopPropagation()}),t(document).bind("keydown",function(e){27==e.keyCode&&n.closeModal(n)})},downloadReport:function(e,t){var n=this;if(n.selectedReports=o.uniq(n.selectedReports),o.isFunction(e)&&e("",function(){var e="reportDownloader",t=document.getElementById(e);null===t&&(t=document.createElement("iframe"),t.id=e,t.style.display="none",document.body.appendChild(t)),t.src="/quizzes/api/activity-report/?dt=dl&di="+n.aid+"&at="+a.getUUID()+"&rt="+n.selectedReports.join("+"),n.closeModal()}),t){var i="reportDownloader",r=document.getElementById(i);null===r&&(r=document.createElement("iframe"),r.id=i,r.style.display="none",document.body.appendChild(r)),r.src="/quizzes/api/activity-report/?dt=dl&di="+n.aid+"&at="+a.getUUID()+"&rt="+n.selectedReports.join("+"),n.closeModal()}},printActivity:function(e){var t=this;t.selectedReports=o.uniq(t.selectedReports),o.isFunction(e)&&e("",function(){var e="reportDownloader",n=document.getElementById(e);null===n&&(n=document.createElement("iframe"),n.id=e,n.style.display="none",document.body.appendChild(n)),n.src="/quizzes/api/activity-report/?dt=pr&di="+t.aid+"&at="+a.getUUID()+"&rt="+t.selectedReports.join("+"),t.closeModal()})},emailActivity:function(e){var t=this;t.selectedReports=o.uniq(t.selectedReports),o.isFunction(e)&&e(),setTimeout(function(){s({url:window.backend_host+"/quizzes/api/activity-report/?dt=em&di="+t.aid+"&at="+a.getUUID()+"&rt="+t.selectedReports.join("+"),type:"GET",success:function(e,n,i){t.closeModal(),g.render({message:gettext("A report has been sent to your email address")})},error:function(e,n,i){t.closeModal(),f.render({message:gettext("Weâ€™re sorry, an error has occurred. Please visit your Reports section or email us at support@socrative.com.")}),analytics.track("Error:EmailReport",{error:e}),console.error(e),console.error(n),console.error(i)}}),t.closeModal()},500)},sendToGoogleDrive:function(e){var t=this;t.selectedReports=o.uniq(t.selectedReports),o.isFunction(e)&&e(),setTimeout(function(){s({url:window.backend_host+"/quizzes/api/activity-report/?dt=go&di="+t.aid+"&at="+a.getUUID()+"&rt="+t.selectedReports.join("+"),type:"GET",success:function(e,n,i){t.closeModal(),g.render({message:gettext("A report has been added to your Google Drive.")})},error:function(e,n,i){t.closeModal(),f.render({message:gettext("Weâ€™re sorry, an error has occurred.  Please visit your Reports section or email us at support@socrative.com.")}),analytics.track("Error:EmailReport",{error:e}),console.error(e),console.error(n),console.error(i)}})},500)},viewChart:function(e){this.closeModal(),o.isFunction(e)?e("final-results/"+this.qid+"/"+this.aid):c.navigate("final-results/"+this.qid+"/"+this.aid,!0)},viewLater:function(e){this.closeModal(),o.isFunction(e)?e():c.navigate("dashboard",!0)},setupCloseModal:function(){var e=this;t("#report-bg").click(function(){e.closeModal()})},closeModal:function(){t("#reports-popup").remove(),this.selectedReports=[],p.stop()}}),f=new l,g=new d;return h}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,,,,function(e,t,n){var i,o;i=[],o=function(){var e={};return e.mainBlue="#0caed6",e.mainRed="#df534d",e.mainOrange="#fb930d",e.mainPurple="#853482",e.mainGreen="#6b9d36",e}.apply(t,i),!(void 0!==o&&(e.exports=o))},function(e,t,n){(function(e){/**
	 * Lightbox v2.7.1
	 * by Lokesh Dhakar - http://lokeshdhakar.com/projects/lightbox2/
	 *
	 * @license http://creativecommons.org/licenses/by/2.5/
	 * - Free for use in both personal and commercial projects
	 * - Attribution requires leaving author name, author link, and the license info intact
	 */
(function(){var t=e,n=function(){function e(){this.fadeDuration=300,this.fitImagesInViewport=!0,this.resizeDuration=300,this.positionFromTop=20,this.showImageNumberLabel=!1,this.alwaysShowNavOnTouchDevices=!1,this.wrapAround=!1}return e.prototype.albumLabel=function(e,t){return"Image "+e+" of "+t},e}(),i=function(){function e(e){this.options=e,this.album=[],this.currentImageIndex=void 0,this.init()}return e.prototype.init=function(){this.enable(),this.build()},e.prototype.enable=function(){var e=this;t("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(n){return e.start(t(n.currentTarget)),!1})},e.prototype.build=function(){var e=this;t("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div><img class='lb-image' src='' /><div class='lb-loader'><div class='spinner'><div class='bounce1'></div><div class='bounce2'></div><div class='bounce3'></div></div></div></div></div></div>").appendTo(t("html")),this.$lightbox=t("#lightbox"),this.$overlay=t("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(t){return e.end(),!1}),this.$outerContainer.on("click",function(t){return e.end(),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})},e.prototype.start=function(e){function n(e){i.album.push({link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var i=this,o=t(window);o.on("resize",t.proxy(this.sizeOverlay,this)),t("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var r,s=0,a=e.attr("data-lightbox");if(a){r=t(e.prop("tagName")+'[data-lightbox="'+a+'"]');for(var u=0;u<r.length;u=++u)n(t(r[u])),r[u]===e[0]&&(s=u)}else if("lightbox"===e.attr("rel"))n(e);else{r=t(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var c=0;c<r.length;c=++c)n(t(r[c])),r[c]===e[0]&&(s=c)}var l=o.scrollTop()+this.options.positionFromTop,d=o.scrollLeft();this.$lightbox.css({top:l+"px",left:d+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(s)},e.prototype.changeImage=function(e){var n=this;this.disableKeyboardNav();var i=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),t(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var o=new Image;o.onload=function(){var r,s,a,u,c,l,d;i.attr("src",n.album[e].link),r=t(o),i.width(o.width),i.height(o.height),n.options.fitImagesInViewport&&(d=t(window).width(),l=t(window).height(),c=d-n.containerLeftPadding-n.containerRightPadding-20,u=l-n.containerTopPadding-n.containerBottomPadding-40,(o.width>c||o.height>u)&&(o.width/c>o.height/u?(a=c,s=parseInt(o.height/(o.width/a),10),i.width(a),i.height(s)):(s=u,a=parseInt(o.width/(o.height/s),10),i.width(a),i.height(s)))),n.sizeContainer(i.width(),i.height())},o.src=this.album[e].link,this.currentImageIndex=e},e.prototype.sizeOverlay=function(){this.$overlay.width(t(window).width()).height(t(document).height())},e.prototype.sizeContainer=function(e,t){function n(){i.$lightbox.find(".lb-dataContainer").width(s),i.$lightbox.find(".lb-prevLink").height(a),i.$lightbox.find(".lb-nextLink").height(a),i.showImage()}var i=this,o=this.$outerContainer.outerWidth(),r=this.$outerContainer.outerHeight(),s=e+this.containerLeftPadding+this.containerRightPadding,a=t+this.containerTopPadding+this.containerBottomPadding;o!==s||r!==a?this.$outerContainer.animate({width:s,height:a},this.options.resizeDuration,"swing",function(){n()}):n()},e.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},e.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},e.prototype.updateDetails=function(){var e=this;"undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(e){location.href=t(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide(),this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},e.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var e=new Image;e.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var t=new Image;t.src=this.album[this.currentImageIndex-1].link}},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(e){var t=27,n=37,i=39,o=e.keyCode,r=String.fromCharCode(o).toLowerCase();o===t||r.match(/x|o|c/)?this.end():"p"===r||o===n?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===r||o===i)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},e.prototype.end=function(){this.disableKeyboardNav(),t(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),t("select, object, embed").css({visibility:"visible"})},e}();t(function(){var e=new n;new i(e)})}).call(this)}).call(t,n(3))},,,function(e,t,n){var i;i=function(e){var t=n(71),i=n(7),o=i.createClass({displayName:"ExplanationTextEntryToggle",propTypes:{questionExplanationContent:i.PropTypes.string.isRequired,questionExplanationCallback:i.PropTypes.func.isRequired,questionState:i.PropTypes.oneOf(["displayContainer","editContainer","formatContainer"]).isRequired},render:function(){var e="edit-question-explanation text-entry-toggle"+("displayContainer"===this.props.questionState?"":" in-editing");return i.DOM.div({style:{display:""===this.props.questionExplanationContent&&"displayContainer"===this.props.questionState?"none":"block"},children:[i.DOM.span({className:"explanation-title",children:gettext("Explanation")+":"}),i.DOM.div({className:e,children:t({questionTextContent:this.props.questionExplanationContent,questionTextOnChange:this.props.questionExplanationCallback,questionState:this.props.questionState})})]})}});return o}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(7),i=t.createClass({displayName:"QuestionEditingContainer",propTypes:{inputId:t.PropTypes.string.isRequired,questionState:t.PropTypes.string.isRequired,editQuestionCallback:t.PropTypes.func.isRequired,formatToggleCallback:t.PropTypes.func.isRequired,questionHasContent:t.PropTypes.bool.isRequired},render:function(){var e=this.props.questionHasContent===!0?"toggle-slider disabled":"toggle-slider",n=t.DOM.div({className:e,children:[t.DOM.input({id:this.props.inputId,type:"checkbox",className:"toggle-slider-checkbox",checked:"formatContainer"===this.props.questionState,onChange:this.props.formatToggleCallback}),t.DOM.label({className:"toggle-slider-label",htmlFor:this.props.inputId,children:[t.DOM.div({className:"toggle-slider-inner"}),t.DOM.div({className:"toggle-slider-switch"})]})]});return t.DOM.span({className:"align-right",children:[t.DOM.button({className:"button-primary button-small save-question align-right",children:[t.DOM.i({"data-icon":"displayContainer"===this.props.questionState?"r":"t"}),t.DOM.span({},"displayContainer"===this.props.questionState?gettext("Edit"):gettext("Save"))],onClick:this.props.editQuestionCallback}),t.DOM.span({className:"align-right",style:{display:"displayContainer"===this.props.questionState?"none":"inline-block"},children:[t.DOM.span({className:"formatting"},gettext("Formatting: ")),n]})]})}});return i}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(28),i=n(72),o=n(13),r=n(2),s=/<(?!p)([A-Z][A-Z0-9]*)\b[^>]*>(.*?)<\/\1>/i,a={componentWillReceiveProps:function(e,t){var n={answers:e.question.answers},i=e.question;i.has("dirty")&&i.get("dirty")===!0||i.get("duplicate")===!0?(this.questionHasContent()&&this.questionHasTags()&&"formatContainer"!==this.state.questionState?n.questionState="formatContainer":"editContainer"!==this.state.questionState&&(n.questionState="editContainer"),i.unset("duplicate")):"displayContainer"!=this.state.questionState&&(n.questionState="displayContainer"),this.setState(n)},addQuestionAnswer:function(){var e=this.props.question,n=new t({order:e.nextAnswerOrder(),is_correct:!1});e.addAnswer(n),this.setState({answers:e.answers})},editQuestionCallback:function(){var e=this;if("displayContainer"===this.state.questionState){if(this.props.questionEditCallback()===!1)return;this.questionHasContent()&&this.questionHasTags()?this.setState({questionState:"formatContainer"}):this.setState({questionState:"editContainer"}),this.props.questionInEditCallback(!0)}else this.saveQuestionCallback(function(){e.setState({answers:e.props.question.answers,savingIndicator:"saved",questionState:"displayContainer"}),e.props.questionInEditCallback(!1)})},saveQuestionCallback:function(e){if(!r.isFunction(e))throw"saveQuestionCallback function argument should be a function; got: "+e;i(this.props.question,e)},questionHasContent:function(){var e=this.props.question;if(e.get("question_text"))return!0;if("TF"!==e.get("type")){var t=!1;if(r.each(e.answers,function(e){e.get("text")&&(t=!0)}),t)return!0}return e.get("explanation")?!0:!1},questionHasTags:function(){function e(e){return s.test(e)||/(<br\ ?\b[^>]*\/?>)/g.test(e)}var t=this.props.question,n=t.get("question_text");if(n&&e(n))return!0;if("MC"===t.get("type").toUpperCase()){var i=!1;if(r.each(t.answers,function(t){e(t.get("text"))&&(i=!0)}),i)return!0}var o=t.get("explanation");return o&&e(o)?!0:!1},formatToggleCallback:function(e){if(e.target.checked)this.setState({questionState:"formatContainer"});else if(this.questionHasTags()){e.target.parentElement.classList.add("disabled");var t=new o;t.render({message:gettext("Please remove all text formatting to turn advanced editor off"),okBtn:gettext("OK")})}else this.setState({questionState:"editContainer"}),e.target.parentElement.classList.remove("disabled")},deleteQuestionCallback:function(){this.props.deleteQuestion(this.props.question)},duplicateQuestionCallback:function(){this.props.duplicateQuestion(this.props.question)},questionTextCallback:function(e){this.props.question.set({question_text:e,dirty:!0})},questionExplanationCallback:function(e){this.props.question.set({explanation:e,dirty:!0})},getNewQuestionState:function(){var e=this.props.question,t="displayContainer";return e.get("dirty")===!0?t="editContainer":e.get("duplicate")===!0&&(e.unset("duplicate"),t=this.questionHasContent()&&this.questionHasTags()?"formatContainer":"editContainer"),t},setQuestionToDirty:function(){this.props.question.set({dirty:!0})}};return a}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(71),i=n(7),o=i.createClass({displayName:"QuestionTextEntryToggle",propTypes:{questionTextContent:i.PropTypes.string.isRequired,questionTextCallback:i.PropTypes.func.isRequired,questionTextState:i.PropTypes.oneOf(["displayContainer","editContainer","formatContainer"]).isRequired},render:function(){return i.DOM.div({children:t({questionTextContent:this.props.questionTextContent,questionTextOnChange:this.props.questionTextCallback,questionState:this.props.questionTextState,focus:!0}),className:"displayContainer"===this.props.questionTextState?"question-text-entry text-entry-toggle align-left":"question-text-entry text-entry-toggle in-editing align-left"})}});return o}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(54),o=n(13),r=n(23),s=n(7),a=window.static_url+"img/loading-indicator.gif",u=s.createClass({displayName:"AddQuestionResourceContainer",propTypes:{addQuestionResourceCallback:s.PropTypes.func.isRequired},disableFileUploadOnIos:function(e){var t=navigator.userAgent,n=t.match(/^.*(iPad).*(OS\s[0-9]).*(CriOS|Version)\/[.0-9]*\sMobile.*$/i);if(n){if("CriOS"!==n[3]&&-1===t.indexOf("Safari")){e.preventDefault();var i=new o;i.render({message:gettext("This feature is currently not available on the application for iPad. Please upload images using a browser or a different device.")})}}else;if(t.match(/Android\s+([\d\.]+)/)&&"4.4.2"===t.match(/Android\s+([\d\.]+)/)[1]){e.preventDefault();var i=new o;i.render({message:gettext("This feature is currently not available on the version of Android detected.")})}},addQuestionButtonClicked:function(e){this.props.addQuestionResourceCallback(e)},render:function(){return s.DOM.div({className:"add-resource-button",children:[s.DOM.span({children:[s.DOM.i({"data-icon":"e"}),s.DOM.i({className:"add-image-button","data-icon":"u"})]}),s.DOM.input({className:"add-resource-input",type:"file",accept:"image/*",onClick:this.disableFileUploadOnIos,onChange:this.addQuestionButtonClicked})]})}}),c=s.createClass({displayName:"QuestionResourceContainer",propTypes:{resourceUrl:s.PropTypes.string.isRequired,removeQuestionResourceCallback:s.PropTypes.func.isRequired},removeQuestionResourceCallback:function(){this.props.removeQuestionResourceCallback()},componentWillReceiveProps:function(e){return{resourceUrl:e.resourceUrl}},render:function(){return s.DOM.div({className:"image-container",children:[s.DOM.img({id:"question-image-preview",src:this.props.resourceUrl}),s.DOM.span({className:"remove-resource-button",children:s.DOM.i({"data-icon":"w"}),onClick:this.removeQuestionResourceCallback})]})}}),l=s.createClass({displayName:"LoadingIndicator",render:function(){return s.DOM.div({id:"question-image-preview-loading",children:[s.DOM.img({src:a}),s.DOM.p({children:gettext("Loading")+"..."})]})}}),d=s.createClass({displayName:"DisplayResourceContainer",propTypes:{resourceUrl:s.PropTypes.string},render:function(){if(this.props.resourceUrl)var e=s.DOM.div({className:"add-resource-button",children:s.DOM.img({className:"question-image-preview",src:this.props.resourceUrl})});else var e=s.DOM.span();return e}}),p=s.createClass({displayName:"ResourceContainer",propTypes:{question:s.PropTypes.instanceOf(r).isRequired,questionState:s.PropTypes.string.isRequired},getInitialState:function(){var e=this.props.question;return!t.isUndefined(e.resources)&&e.resources.length>0?{resourceUrl:e.resources[0].get("url"),resourceContainerContent:"removeQuestionResourceButton"}:{resourceContainerContent:"addQuestionResourceButton"}},componentWillReceiveProps:function(e){!t.isUndefined(e.question.resources)&&e.question.resources.length>0?this.setState({resourceContainerContent:"removeQuestionResourceButton",resourceUrl:e.question.resources[0].get("url")}):this.setState({resourceContainerContent:"addQuestionResourceButton",resourceUrl:""})},addQuestionResourceCallback:function(e){var n=this,r=this.props.question;if(e.target.files)var s=e.target.files[0].name.replace(/\W/g,""),a="image"===e.target.files[0].type.split("/")[0];else var s=e.target.value.match(/[^\\/]+$/)[0],u=t.last(e.target.value.split(".")),a=t.contains(["png","jpg","jpeg","gif","bmp","tiff"],u);if(!a){var c=new o;return void c.render({message:gettext("Please upload an image.")})}navigator.userAgent.match(/MSIE (8|9)/)||this.setState({resourceContainerContent:"loadingIndicator"}),filepicker.store(e.target,{location:"S3",access:"public",filename:s},function(e){var t="https://s3.amazonaws.com/socrative/"+e.key,o={};o.name=s,o.url=t,r.set("dirty",!0),r.resources.push(new i(o)),n.setState({resourceUrl:t,resourceContainerContent:"removeQuestionResourceButton"})})},removeQuestionResourceCallback:function(){var e=this.props.question;e.resources.length=0,e.set("dirty",!0),this.setState({resourceContainerContent:"addQuestionResourceButton"})},render:function(){if("displayContainer"===this.props.questionState)var e=d({resourceUrl:this.state.resourceUrl});else if("addQuestionResourceButton"===this.state.resourceContainerContent)var e=u({addQuestionResourceCallback:this.addQuestionResourceCallback});else if("removeQuestionResourceButton"===this.state.resourceContainerContent)var e=c({resourceUrl:this.state.resourceUrl,loadingResourceIndicatorStyle:this.state.loadingResourceIndicatorStyle,removeQuestionResourceCallback:this.removeQuestionResourceCallback});else{if("loadingIndicator"!==this.state.resourceContainerContent)throw"odd state found";var e=l({})}return s.DOM.div({className:"resources-container align-left",children:e})}});return p}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(7),i=t.createClass({displayName:"SwapQuestion",propTypes:{order:t.PropTypes.number.isRequired,changeQuestionOrder:t.PropTypes.func.isRequired,deleteQuestion:t.PropTypes.func.isRequired,duplicateQuestion:t.PropTypes.func.isRequired,hideButtons:t.PropTypes.bool.isRequired},increaseQuestionOrder:function(){this.props.changeQuestionOrder(this.props.order,this.props.order-1)},decreaseQuestionOrder:function(){this.props.changeQuestionOrder(this.props.order,this.props.order+1)},deleteQuestionCallback:function(){this.props.deleteQuestion()},duplicateQuestionCallback:function(){this.props.duplicateQuestion()},render:function(){return t.DOM.div({className:"relocate-question-container",children:[t.DOM.button({className:"delete-button button",children:t.DOM.i({"data-icon":"w"}),tabIndex:-1,onClick:this.deleteQuestionCallback}),t.DOM.button({className:"move-up-button button",children:t.DOM.i({"data-icon":"k"}),onClick:this.increaseQuestionOrder,disabled:this.props.hideButtons?"disabled":""}),t.DOM.button({className:"move-down-button button",children:t.DOM.i({"data-icon":"m"}),onClick:this.decreaseQuestionOrder,disabled:this.props.hideButtons?"disabled":""}),t.DOM.button({className:"duplicate-question-button button",children:t.DOM.i({"data-icon":"y"}),onClick:this.duplicateQuestionCallback,disabled:this.props.hideButtons?"disabled":""})]})}});return i}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;(function(o){i=function(e){var t=n(173),i=n(2),r=n(205),s=n(7),a=["displayContainer","editContainer","formatContainer"],u=["&","<",">",'"',"'","`","!","@","%","=","{","}"],c=["&amp;","&lt;","&gt;","&quot;","&#039;","&#96;","&#33;","&#64;","&#37;","&#61;","&#123;","&#125;"],l=s.createClass({displayName:"QuestionTextarea",propTypes:{questionState:s.PropTypes.string.isRequired,questionTextContent:s.PropTypes.string,questionTextOnChange:s.PropTypes.func.isRequired,focus:s.PropTypes.bool},textareaDomNode:null,getTextareaDomNode:function(){return this.textareaDomNode||(this.textareaDomNode=o(this.getDOMNode()).find("textarea")),this.textareaDomNode},getInitialState:function(){var e=this.props.questionTextContent||"";return e="editContainer"===this.props.questionState?this.stripTags(e):e.replace(new RegExp("(\r|\n)","g"),"<br>"),{questionText:this.unescape(e),contentChanged:!1}},unescape:function(e){return e&&i.each(c,function(t,n){e=e.replace(new RegExp(t,"g"),u[n])}),e},escape:function(e){return e&&i.each(u,function(t,n){e=e.replace(new RegExp(t,"g"),c[n])}),e},handleChange:function(e){this.setState({questionText:e.target.value,contentChanged:!1}),this.props.questionTextOnChange(this.escape(e.target.value.trim()))},stripTags:function(e){return e&&(e=e.replace(new RegExp("</p>([^</p>]*)$"),""),e=e.replace(new RegExp("</p>","g"),"\n"),e=e.replace(new RegExp("<p>","g"),""),e=e.replace(new RegExp("&nbsp;","g")," "),e=e.replace(new RegExp("(<br ?\b[^>]*/?>)+","g"),"\r\n"),e=o("<div/>").html(e).text()),e},updateEditor:function(){if("formatContainer"===this.props.questionState){var e=this.getTextareaDomNode().getPath();try{t(e,this.props.questionTextOnChange)}catch(n){return void console.warn(n)}}else if("undefined"!=typeof tinyMCE)for(var i=tinyMCE.editors.length,o=i;o>0;o--)tinyMCE.editors[o-1].remove()},componentWillReceiveProps:function(e){var t=e.questionTextContent||"";t="editContainer"===e.questionState?this.stripTags(t):t.replace(new RegExp("(\n)","g"),"<br>"),this.setState({questionText:t,contentChanged:!0}),this.props.questionState!==e.questionState?(this.props=e,this.updateEditor()):this.props=e},componentDidUpdate:function(e,t){if("formatContainer"===this.props.questionState&&t.questionText!==this.state.questionText)for(var n=this.getTextareaDomNode().getPath(),i=tinyMCE.editors.length,o=i;o>0;o--)try{tinyMCE.editors[o-1].settings.selector==n&&tinyMCE.editors[o-1].setContent(this.state.questionText)}catch(s){return void console.warn(s)}"editContainer"===this.props.questionState&&this.state.contentChanged===!0&&r.update(this.getTextareaDomNode()[0])},componentDidMount:function(){this.updateEditor(),r(this.getTextareaDomNode())},render:function(){return s.DOM.div({className:"text-entry-toggle-textbox-container question-text-setup-container",children:s.DOM.textarea({style:{visibility:"visible"},className:"textfield question-textfield text-entry-toggle-textbox",value:this.state.questionText,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",type:"text",autoFocus:this.props.focus,onChange:this.handleChange})})}}),d=s.createClass({displayName:"QuestionTextDisplayContainer",propTypes:{questionTextContent:s.PropTypes.string},render:function(){var e=this.props.questionTextContent;return e=e.replace(new RegExp("(\n)","g"),"<br>"),s.DOM.div({className:"text-entry-toggle-display-container",children:s.DOM.div({className:"question-explanation-wrapper",children:s.DOM.div({className:"edit-question-text text-entry-toggle-display",dangerouslySetInnerHTML:{__html:e}})})})}}),p=s.createClass({displayName:"QuestionTextDisplayContainer",propTypes:{questionTextContent:s.PropTypes.string,questionTextOnChange:s.PropTypes.func.isRequired,questionState:s.PropTypes.oneOf(a).isRequired,focus:s.PropTypes.bool},render:function(){if("displayContainer"===this.props.questionState)var e=d({questionTextContent:this.props.questionTextContent});else{if(!i.contains(["editContainer","formatContainer"],this.props.questionState))throw"error: "+this.props.questionState;var e=l({questionTextContent:this.props.questionTextContent,questionTextOnChange:this.props.questionTextOnChange,questionState:this.props.questionState,focus:this.props.focus})}return e}});return p}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}).call(t,n(3))},function(e,t,n){var i;(function(o){i=function(e){var t=n(10),i=n(2),r=/<([A-Z][A-Z0-9]*)\b[^>]*>(.*?)<\/\1>/i,s=function(e,n){var s=[],a=e.get("question_text");a&&""!=a?r.test(a)&&!o(a).text()&&s.push(gettext("There is a question without text in the question body.")):s.push(gettext("There is a question without text in the question body."));var u=i.filter(e.answers,function(e){return e.get("text")?r.test(e.get("text"))?o(e.get("text")).text()?!0:!1:!0:!1});if("MC"==e.get("type")&&u.length<2&&s.push(gettext("All Multiple Choice questions must have at least 2 answer choices.")),s.length>0){e.set("dirty",!0);var c=new t,l=gettext("Oops! We found an issue with this quiz:");return i.each(s,function(e){l+="<br />"+e}),c.render({message:l}),!1}return s="",-1!=i.indexOf(["MC","FR"],e.get("type"))&&(e.answers=u),e.answers.forEach(function(e,t){e.set("order",t+1)}),e.has("question_id")?(e.save(null,{success:function(t,n){"MC"===e.get("type")&&e.answers.length===n.answers.length&&n.answers.forEach(function(t,n){e.answers.forEach(function(e,n){t.id===e.get("id")&&e.set({order:t.order})})})}}),i.isFunction(n)&&n(),!0):(e.save(null,{success:function(t){t.answers.forEach(function(t,n){e.answers[n].set({id:t.id,order:t.order})}),e.unset("answers"),i.isFunction(n)&&n()}}),!0)};return s}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}).call(t,n(3))},function(e,t,n){var i;i=function(e){function t(){function e(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}function t(e){var t=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var r=i.trim(n[o]);if(r.substring(0,e.length+1)==e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var n=t("csrftoken");i.ajaxSetup({beforeSend:function(t,i){e(i.type)||t.setRequestHeader("X-CSRFToken",n)}})}var i=n(3),o=n(2);o.isUndefined(console)&&(window.console={}),o.isFunction(console.log)||(console.log=function(e){}),o.isFunction(console.warn)||(console.warn=function(e){}),o.isFunction(console.error)||(console.error=function(e){}),Date.prototype.toISOString||(Date.prototype.toJSON||(Date.prototype.toJSON=function(e){function t(e){return 10>e?"0"+e:e}return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z"}),Date.prototype.toISOString=Date.prototype.toJSON),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for(n=0>n?Math.ceil(n):Math.floor(n),0>n&&(n+=t);t>n;n++)if(n in this&&this[n]===e)return n;return-1}),t(),String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})}),String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)},window.runAfter=function(e,t,n,i){if(o.isUndefined(n)&&(n=1e3),o.isUndefined(i)&&(i=.05*n),0===n)throw"runAfter timeout";o.delay(function(){e()?t():window.runAfter(e,t,n-i,i)},i)};var r=document.createElement("div");return r.className="mediatest",document.body.appendChild(r),window.getComputedStyle&&"absolute"==window.getComputedStyle(r).position?i("html").addClass("mediaquery"):i("html").addClass("no-mediaquery"),document.body.removeChild(r),i.fn.getPath=function(){if(1!=this.length)throw"Requires one element.";for(var e,t=this;t.length;){var n=t[0],i=n.localName;if(!i)break;i=i.toLowerCase();var o=t.parent(),r=o.children(i);r.length>1&&(i+=":eq("+r.index(n)+")"),e=i+(e?">"+e:""),t=o}return e},{}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,,,,,,,,,,,,function(e,t,n){var i;i=function(e){var t=n(3),i=n(2),o=n(1),r=n(8),s=n(15),a=n(11),u=n(134),c=n(5),l=n(87),d=n(88),p=n(89),h=n(56),f=o.View.extend({el:"#main-content",template:null,title:null,date:null,onRoutedTo:function(e,t){var n=this;this.qid=parseInt(e),this.aid=t,this.drilledDownToQuestion=null,u.set("responses",[]),u.set("activity_id",this.qid),u.set("activity_state",-1),r({url:window.backend_host+"/common/api/final-results/",type:"POST",dataType:"json",data:{auth_token:c.get("auth_token"),activity_instance_id:this.aid},success:function(e){var t={};i.each(e.student_names,function(e){t[e.user_uuid]=e.name}),u.set("student_names",t),u.set("responses",e.responses),n.date=new Date(1e3*e.start_time),u.has("activity_id")||u.set("activity_id",n.qid),u.getCurrentQuiz(function(e){n.title=e.get("name"),n.questionDisplayDrilldown=new l({isLiveResults:!1,localActivity:u}),n.questionDisplayDrilldown.el="#lr-question-display-container",n.questionDisplayDrilldown.mainView=n,n.questionResultsDrilldown=new d({isLiveResults:!1,showHowDidWeDoRow:!0,localActivity:u}),n.questionResultsDrilldown.el="#lr-question-results-container",n.questionResultsDrilldown.mainView=n,n.studentPacedResults=new p({isLiveResults:!1,localActivity:u,mainView:n}),n.render()})},error:function(e,t,n){console.error(e),console.error(t),console.error(n)}})},loadTemplate:function(){return null===this.template&&(this.template=t("#main-template").html()),this.template},render:function(){var e=this,n=e.title+" - "+e.date.toDateString();s.templates.render("/live-results/final",t("#main-content"),function(){a.resetAll({hideMenu:!0,title:n,menuReplacement:"final-results",specialHeaderClass:"final-results-special-header",useBlueLogo:!0,complete:function(){var n=t("div.header-final-results-buttons");n.find("#get-report-button").off().on("click",function(){new h({aid:e.aid,qid:e.qid,allowViewLater:!0,allowViewChart:!1})}),n.find("#exit-final-results-button").click(function(){s.router.navigate("dashboard",!0)}),e.trigger("Render::Header")}}),e.trigger("Render::Main");var o=u.getSettings();o.activity_type=u.get("activity_type"),o.drilledDownToQuestion=e.drilledDownToQuestion,o.title=n;var r=i.template(e.loadTemplate());t("#final-results-main-content").html(r(o)),null!==e.drilledDownToQuestion&&(t("#previous-button").click(function(){null===e.drilledDownToQuestion?e.goToQuestion(u.get("activity_state")-1):(e.drilledDownToQuestion-=1,e.render())}),t("#next-button").click(function(){null===e.drilledDownToQuestion?-1===u.get("activity_state")?e.goToQuestion(1):e.goToQuestion(u.get("activity_state")+1):(e.drilledDownToQuestion+=1,e.render())}),t("#back-to-live-results-button").click(function(){e.drilledDownToQuestion=null,e.render()})),e.renderChildren(),e.updateButtonVisibility()})},updateButtonVisibility:function(){var e=!1,n=!1,i=u.get("quiz").questions.length,o=-1;null!==this.drilledDownToQuestion?o=this.drilledDownToQuestion-1:u.get("activity_state")>0&&(o=u.get("activity_state")),1>o?e=!0:o===u.get("quiz").questions.length-1&&(n=!0),1===i&&(e=!0,n=!0),e?(t("#previous-button").hide(),t("#back-to-live-results-button").addClass("first-btn")):(t("#previous-button").show(),t("#back-to-live-results-button").removeClass("first-btn")),n?t("#next-button").hide():t("#next-button").show()},renderChildren:function(){null===this.drilledDownToQuestion?this.studentPacedResults.render({isLiveResults:!1}):(this.questionDisplayDrilldown.render(),this.questionResultsDrilldown.render({showHowDidWeDoRow:!0}))}}),g={};return g.view=new f,s.router.route("final-results/:quizzId/:activityInstanceId","final-results",function(e,t){s.requireLoggedIn("teacher")&&g.view.onRoutedTo(e,t)}),g}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(3),i=n(2),o=n(1),r=n(15),s=null;n(62);var a=o.View.extend({el:"#main-content",template:null,showingExplanation:!1,events:{"click #less-explanation-button":function(){t("#question-explanation-display").hide(),t("#less-explanation-button").hide(),t("#more-explanation-button").show()},"click #more-explanation-button":function(){t("#question-explanation-display").show(),t("#more-explanation-button").hide(),t("#less-explanation-button").show()}},initialize:function(e){
var t=this;if(i.isUndefined(e)||i.isUndefined(e.localActivity))throw"QuestionDisplayDrilldownView should receive a local activity. Got: "+e;s=e.localActivity,e.isLiveResults!==!1&&this.listenTo(s,"change",function(){s.isInProgress()&&t.render()})},render:function(){var e=this;s.getCurrentQuiz(function(n){if(0!==t(e.el).length){var o=n;if(!o)return void console.warn("Cannot render question-display, quiz is undefined in the localActivity:",s);var a=null;a=null!==e.mainView.drilledDownToQuestion?e.mainView.drilledDownToQuestion-1:s.get("activity_state"),0>a&&(a=0);var u=o.questions;i.isFunction(o.has)&&o.has("questions")&&(u=o.get("questions"));var c=u[a];if(c&&i.isFunction(c.toJSON)&&(c=c.toJSON(!0)),c.resources.length>0){var l=window.innerWidth,d={};null!==c.resources[0].data&&(d=JSON.parse(c.resources[0].data)),i.isEmpty(d)||(480>=l?c.resources[0].url=d.S.url:l>480&&800>=l?c.resources[0].url=d.M.url:l>800&&1200>=l?c.resources[0].url=d.L.url:l>1200&&(c.resources[0].url=d.XL.url))}var p=r.selectOne(e.el);if(e.shouldRender(c)){p.show();var h=i.template(r.selectOne("#question-display-drilldown-template").html());p.html(h({question:c,activity_type:s.get("activity_type")})),t("#less-explanation-button").hide(),t("#question-explanation-display").hide()}else p.hide();e.trigger("Render")}})},shouldRender:function(e){return"1Q"!==s.get("activity_type")?!0:!i.isUndefined(e.question_text)&&e.question_text.length>0?!0:!1},onDestroy:function(){t("#less-explanation-button").off("click"),t("#more-explanation-button").off("click"),this.stopListening()}});return a}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(3),i=n(2),o=n(1),r=n(15),s=null,a=n(55),u=null,c=n(10),l=n(13),d=!0,p=!1,h=o.View.extend({template:null,showResults:!1,showDarkTheme:!1,initialize:function(e){var t=this;if(i.isUndefined(e)||i.isUndefined(e.localActivity))throw"QuestionResultsDrilldownView should receive a local activity. Got: "+e;s=e.localActivity,u=new a({localActivity:s}),e.isLiveResults!==!1&&this.listenTo(s,"change",function(){s.get("activity_state")!=t.currentActivityState&&(t.currentActivityState=s.get("activity_state")),t.showResults===!0?e.keepResultsVisibilityState=!0:e.keepResultsVisibilityState=!1,t.render(e)})},render:function(e){var n=this;i.isUndefined(e)||i.isUndefined(e.keepResultsVisibilityState)?this.showResults=!1:this.showResults=e.keepResultsVisibilityState,s.getCurrentQuiz(function(o){if(0!==t(n.el).length){if(!o)return void console.warn("Cannot render question-results-drilldown, localActivity has no quiz",s);i.isUndefined(e)||i.isUndefined(e.showHowDidWeDoRow)||(n.showHowDidWeDoRow=e.showHowDidWeDoRow);var a=u.getCurrentQuestion(n.mainView.drilledDownToQuestion),c=u.buildTeacherPacedResponseContext(n.mainView.drilledDownToQuestion);if(null===a&&(a=o[n.mainView.drilledDownToQuestion-1]),null===c)return void console.warn("Context has is null!");c.showNames=p,c.showAnswers=d,c.settings=s.getSettings(),"1Q"===s.get("activity_type")?(c.showHowDidWeDoRow=!0,n.showResults=!0,c.showAnswers=d):(c.showHowDidWeDoRow=n.showHowDidWeDoRow,"FR"!==a.type&&(c.showAnswers=d));var l=i.template(r.selectOne("#question-results-drilldown-template").html());if(r.selectOne(n.el).html(l(c)),"FR"===a.type){n.setupFrResponses(c),n.showDarkTheme===!0&&t(n.el).parents(".lr-question-container").addClass("dark-theme");var h=t("#switch-theme");h.click(function(){t(n.el).parents(".lr-question-container").toggleClass("dark-theme"),n.showDarkTheme=!n.showDarkTheme})}else{var f=t("#howd-we-do-button"),g=t("#results-content"),m=t("#results-content-default");f.click(function(){g.toggle(),m.toggle(),n.showResults=!n.showResults}),n.showResults?m.toggle():g.toggle()}n.mainView.updateButtonVisibility(),n.trigger("Render")}})},setupFrResponses:function(e){var n=this,o=t("#hide-answers-button"),r=t("#show-answers-button"),a=t("#hide-names-button"),u=t("#show-names-button");i.each(e.responses,function(n){var i=t("#show-answer"+n.id+"-button"),o=t("#hide-answer"+n.id+"-button");n._showName=e.showNames,n._showAnswer=e.showAnswers,e.showCorrect?i.hide():o.hide(),n.showName=function(){t("#student"+n.id+"-name").show(),n._showName=!0,p=!0},n.hideName=function(){t("#student"+n.id+"-name").hide(),n._showName=!1,p=!1},n.showAnswer=function(){t("#student"+n.id+"-response").html(this.text_answers[0].answer_text),o.show(),i.hide(),n._showAnswer=!0},n.hideAnswer=function(){t("#student"+n.id+"-response").html("&#x25CF;&#x25CF;&#x25CF;&#x25CF;&#x25CF;"),i.show(),o.hide(),n._showAnswer=!1},i.click(function(){n.showAnswer()}),o.click(function(){n.hideAnswer()})});var h=function(){i.each(e.responses,function(e){e.showAnswer()}),d=!0,r.hide(),o.show()},f=function(){i.each(e.responses,function(e){e.hideAnswer()}),d=!1,o.hide(),r.show()};r.click(h),o.click(f);var g=function(){i.each(e.responses,function(e){e.showName()}),u.hide(),a.show()},m=function(){i.each(e.responses,function(e){e.hideName()}),a.hide(),u.show()};u.click(g),a.click(m),e.showNames?(u.show(),g()):(a.hide(),m()),e.showAnswers?(h(),r.hide()):o.hide(),"1Q"===s.get("activity_type")&&(t("#convert-to-survey-button").click(function(){if(e.responses.length<2){var t=new c;return void t.render({message:gettext("You must have at least 2 student responses to Start a Vote.")})}var i=new l;i.render({message:gettext("Start a Vote?"),ok:function(){s.convertCurrentQuickQuestionToSurvey(function(){n.mainView.onRoutedTo()})}})}),t(".remove-free-response-button").click(function(){var e=t(this),i=parseInt(e.attr("response_id"));s.hideResponse(i),n.render()}))},onDestroy:function(){this.stopListening(),t("#howd-we-do-button").off("click"),t("#hide-answers-button").off("click"),t("#show-answers-button").off("click"),t("#hide-names-button").off("click"),t("#show-names-button").off("click");var e=u.buildTeacherPacedResponseContext(this.mainView.drilledDownToQuestion);i.each(e.responses,function(e){t("#show-answer"+e.id+"-button").off("click"),t("#hide-answer"+e.id+"-button").off("click")}),t("#convert-to-survey-button").off("click"),t(".remove-free-response-button").off("click")}});return h}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(3),i=n(2),o=n(1),r=null,s=n(55),a=n(35),u=null,c=n(7),l=c.createClass({propTypes:{showStudentGrade:c.PropTypes.bool.isRequired,switchFromGradeToProgress:c.PropTypes.func.isRequired,orderStudentsByName:c.PropTypes.func.isRequired},sortingNameClick:function(){},sortingProgressClick:function(){},render:function(){return c.DOM.div({className:"column-title clearfix",children:[c.DOM.span({id:"student-name-title",children:[gettext("Name"),c.DOM.select({id:"student-sort",onChange:this.props.orderStudentsByName,children:[c.DOM.option({children:"A-Z"}),c.DOM.option({children:"Z-A"})]})]}),c.DOM.span({id:"student-progress-title",children:[c.DOM.select({id:"student-progress-sort",value:this.props.showStudentGrade===!0?gettext("Score"):gettext("Progress"),onChange:this.props.switchFromGradeToProgress,children:[c.DOM.option({value:gettext("Score"),children:gettext("Score")}),c.DOM.option({value:gettext("Progress"),children:gettext("Progress")})]})]})]})}}),d=c.createClass({render:function(){return c.DOM.div({className:"result-row row-total",children:[c.DOM.p({children:gettext("Class Total")})]})}}),p=c.createClass({propTypes:{studentName:c.PropTypes.string.isRequired,progress:c.PropTypes.number.isRequired,grade:c.PropTypes.number.isRequired,showStudentGrade:c.PropTypes.bool.isRequired},render:function(){var e=this.props.grade?this.props.grade:0;if(this.props.showStudentGrade===!0)var t=(100*e).toFixed(0)+"%";else{if(this.props.showStudentGrade!==!1)return;var t=(100*this.props.progress).toFixed(0)+"%"}var n="";return this.props.isFinished===!0&&(n=" finished"),c.DOM.div({className:"result-row clearfix",children:[c.DOM.div({className:"status-column"+n}),c.DOM.div({className:"student-row-name",children:[c.DOM.p({dangerouslySetInnerHTML:{__html:this.props.studentName}})]}),c.DOM.div({className:"percent-complete",children:t})]})}}),h=function(e,t){return t.indexOf(e)>-1},f=c.createClass({propTypes:{context:c.PropTypes.object.isRequired,orderStudentsByName:c.PropTypes.func.isRequired},getInitialState:function(){return{showStudentGrade:this.props.context.isLiveResults===!0?!1:!0}},switchFromGradeToProgress:function(){this.setState({showStudentGrade:!this.state.showStudentGrade})},render:function(){var e=[],t=this.props.context,n=this.state.showStudentGrade,o=[];return t.studentsFinished&&t.studentsFinished.length>0&&(o=t.studentsFinished),i.each(t.studentInfos,function(t){var i=!1;h(t.uuid,o)&&(i=!0),e.push(p({studentName:t.name,progress:t.finalProgress,grade:t.grade,showStudentGrade:n,isFinished:i}))}),c.DOM.div({className:"name-column clearfix",dataFinished:this.props.finished,children:[l({showStudentGrade:n,switchFromGradeToProgress:this.switchFromGradeToProgress,orderStudentsByName:this.props.orderStudentsByName}),e,d()]})}}),g=c.createClass({propTypes:{response:c.PropTypes.object,text:c.PropTypes.string,hideStudentResponses:c.PropTypes.bool},render:function(){var e="result-row ";if(this.props.hideStudentResponses===!0)e+=" hidden-response-table-cell",this.props.text="";else if(""!==this.props.text){var t="blue-table-cell";i.isUndefined(this.props.response)||(this.props.response.is_correct===!0?t="green-table-cell":this.props.response.is_correct===!1&&(t="red-table-cell")),e+=t}return this.props.text&&-1!==i.indexOf(["True","False"],this.props.text)&&(this.props.text=gettext(this.props.text)),c.DOM.div({className:e,children:c.DOM.p({children:i.unescape(this.props.text).substring(0,8)})})}}),m=c.createClass({propTypes:{question:c.PropTypes.object.isRequired,context:c.PropTypes.object.isRequired,mainView:c.PropTypes.object.isRequired,hideStudentResponses:c.PropTypes.bool.isRequired},goToQuestionResultDrilldown:function(){this.props.mainView.drilledDownToQuestion=this.props.question.get("order"),this.props.mainView.render()},render:function(){var e=this,t=[],n=this.props.context,o=this.props.question;i.each(n.studentInfos,function(r){var s=i.find(n.responses[r.uuid],function(e){return e.question===o.id});if(i.isUndefined(s))var a=g({text:""});else var a=g({response:s,text:s.text,hideStudentResponses:e.props.hideStudentResponses});t.push(a)});var r="";return o.incorrectOrCorrectAnswers>0&&(r="{0}%".format((100*o.averageCorrect).toFixed(0))),c.DOM.div({className:"question-column",question_order:o.get("order"),children:[c.DOM.div({className:"column-title",onClick:this.goToQuestionResultDrilldown,children:[c.DOM.div({className:"question-number-"+o.get("type").toLowerCase(),children:c.DOM.h1({children:"#"+o.get("order")})})]}),t,c.DOM.div({className:"result-row row-total",onClick:this.goToQuestionResultDrilldown,children:c.DOM.p({children:r})})]})}}),v=c.createClass({propTypes:{context:c.PropTypes.object.isRequired,mainView:c.PropTypes.object.isRequired,hideStudentResponses:c.PropTypes.bool.isRequired},render:function(){var e=this,t=1.01,n=this.props.context;if(i.isUndefined(n.quiz))throw"InvalidOperationException: localActivity quiz is undefined";var o=[],r=83.5*n.quiz.questions.length*t;return i.each(n.quiz.questions,function(t){o.push(m({question:t,context:n,mainView:e.props.mainView,hideStudentResponses:e.props.hideStudentResponses}))}),c.DOM.div({className:"relative-area",children:[c.DOM.div({style:{width:r},id:"scroll-area",children:o})]})}}),A=o.View.extend({sortStudentNamesAscending:!0,sortStudentProgressAscending:!0,isLiveResults:!0,sortQuestionProgressAscending:!0,initialize:function(e){if(i.isUndefined(e)||i.isUndefined(e.localActivity)||i.isUndefined(e.mainView))throw"StudentPacedResultsView should receive a local activity. Got: "+e;r=e.localActivity,u=new s({localActivity:r}),this.mainView=e.mainView},render:function(e){var n=this,o=document.getElementById("lr-sp-result-table-container");if(i.isUndefined(e)||i.isUndefined(e.isLiveResults))throw"QuestionResultsDrilldownView should receive a isLiveResults. Got: "+e;this.isLiveResults=e.isLiveResults,this.isLiveResults===!0&&this.listenTo(r,"change",function(){r.has("quiz")&&null!==o&&i.defer(function(){n.renderContent(e)})});var s=[];r.get("students_finished")&&r.get("students_finished").length>0&&(s=r.get("students_finished")),a.listenFor("studentFinished",function(t){s.push(t.user_uuid),r.set("students_finished",s),i.defer(function(){n.renderContent(e)})}),this.renderContent(e);var u=gettext("Hide Student Responses"),c=gettext("Show Student Responses"),l=t(".hide-student-responses");return n.mainView.hideStudentResponses===!0&&l.text(c),l.on("click",function(){var i=t(this);i.hasClass("responses-hidden")?(i.text(u),i.removeClass("responses-hidden")):(i.text(c),i.addClass("responses-hidden")),n.mainView.hideStudentResponses=!n.mainView.hideStudentResponses,n.renderContent(e)}),this},renderContent:function(e){var t=this,n=function(){t.sortStudentNamesAscending=!t.sortStudentNamesAscending,t.renderContent(e)},i=document.getElementById("lr-sp-result-table-container");if(null!==i){var o=u.buildLiveResultsTemplateContext(this.sortStudentNamesAscending);o.isLiveResults=this.isLiveResults,o.studentsFinished=[],o.studentsFinished=r.get("students_finished"),c.renderComponent(c.DOM.div({children:[c.DOM.div({id:"results-table",children:[f({context:o,orderStudentsByName:n}),v({mainView:t.mainView,context:o,hideStudentResponses:t.mainView.hideStudentResponses})]}),c.DOM.p({children:[gettext("Click on Question"),c.DOM.strong({children:" #s "}),gettext("or Class Total"),c.DOM.strong({children:" %s "}),gettext("for a detailed question view")]})]}),i)}},onDestroy:function(){this.stopListening(),a.stopListeningFor("studentFinished"),c.unmountComponentAtNode(document.getElementById("lr-sp-result-table-container"))}});return A}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,,,,,,,,,function(e,t,n){var i;i=function(e){var t=n(3),i=n(1),o=n(2),r=n(15),s=n(8),a=n(11),u=n(20),c=n(5),l=n(36),d=n(13),p=n(72),h=n(7),f=n(136),g=n(161),m=i.View.extend({el:"#main-content",mode:"default",quiz:null,soc_number:null,cleanupCallbacks:[],tags:{},tagsLoading:!1,shouldOpenTags:!1,onNavigatedTo:function(){var e=this,t={url:window.backend_host+"/quizzes/api/quiz/",dataType:"json",success:function(t,n,i){null!==e.quiz&&e.quiz.off(),e.quiz=new u(t),e.quiz.set("user_uuid",c.get("auth_token")),e.render()},error:function(e,t,n){analytics.track("Error:GetOrCreateQuizToEdit",e),console.error(e),console.error(t),console.error(n)}};null===this.soc_number?(t.type="POST",t.data={user_uuid:c.get("auth_token")}):(t.type="GET",t.url=window.backend_host+"/quizzes/api/get-quiz-by-soc/{0}/{1}/".format(c.get("auth_token"),this.soc_number)),s(t)},onUnloadMessage:function(e){var n=this;"reset"!=e&&t(window).on("beforeunload",function(e){var t=n.validateQuiz(n.quiz);return t?void n.saveQuiz("noRedirect"):gettext("Are you sure you want to leave the page? You can save your changes first.")})},removeQuiz:function(e){var t=this;s({url:window.backend_host+"/quizzes/api/quiz/"+c.get("auth_token")+"/"+t.quiz.id,type:"DELETE",success:function(e,t,n){console.log("Delete unsaved quiz SUCCESS")},error:function(e,t,n){console.log("Delete unsaved quiz ERROR - deleteUnsavedQuiz")},complete:function(){t.quiz.set("id",""),t.onUnloadMessage("reset"),t.redirect(e)}})},redirect:function(e){"manage-quizzes"==e?i.history.navigate("manage-quizzes",!0):"live-results"==e?i.history.navigate("live-results",!0):i.history.navigate("dashboard",!0)},saveQuiz:function(e){var t=this;if(t.quiz.get("dirty")&&t.quiz.has("dirty")){var n=(new Date).toISOString();t.quiz.set("last_updated",n),delete t.quiz.questions,t.quiz.unset("created_by"),t.quiz.unset("created_date");var i={};i.tags=[],o.each(t.quiz.tags,function(e){i.tags.push(e.id)}),t.quiz.save(i),t.quiz=null,"noRedirect"===e||this.redirect(e),f.start(gettext("Quiz Saved"))}else"noRedirect"===e||this.redirect(e),f.start(gettext("Quiz Saved"))},checkValidation:function(e){var t=this.validateQuiz(this.quiz,e);return t===!0?(this.saveQuiz(e),!0):!1},checkQuizState:function(e){0===this.quiz.questions.length?this.quiz.has("last_updated")?this.checkValidation(e):""==this.quiz.get("name")?this.removeQuiz(e):this.checkValidation(e):this.checkValidation(e)},onHashChange:function(){var e=this,n=e.quiz;(window.history&&window.history.pushState||"Explorer"===l.browser&&l.version<10)&&t(window).one("hashchange",function(t){console.log("hashchange_____________________"),!e.quiz.has("last_updated")&&!e.quiz.has("dirty")&&n.questions.length<1?(console.log("hashchange_____________________delete"),e.removeQuiz()):(console.log("hashchange_____________________save"),e.checkValidation())})},render:function(){var e=this;if(console.log("EDIT-Quiz render method_________"),a.resetAll({hideMenu:!0,dashboardButtonCallback:function(){e.checkQuizState()},manageQuizzesButtonCallback:function(){e.checkQuizState("manage-quizzes")},activityButtonCallback:function(){t("#no-activity").length<1&&e.checkQuizState("live-results")},logoButtonCallback:function(){e.checkQuizState()},title:this.title,menuReplacement:"saveExit",menuReplacementCallback:function(){e.checkQuizState()}}),null!=this.quiz){l.isMobileBrowser===!0&&h.initializeTouchEvents(!0);var n=document.getElementById("main-content");null!==n?h.renderComponent(g({quiz:this.quiz,scrollToQuestion:this.scrollToQuestion}),n):console.warn("main-content not found"),this.onUnloadMessage()}},selectQuestionDiv:function(e){return e.has("question_number")?t("#question-"+e.get("question_number")):e.has("order")?t("#question-"+e.get("order")):null},scrollToQuestion:function(e,n){if(e){if(e.has("question_number"))var i=r.selectOne("#question-"+e.get("question_number"));else if(e.has("order"))var i=r.selectOne("#question-"+e.get("order"));else var i=null;o.isUndefined(n)&&(n=1e3),null!==i&&t("body, html").animate({scrollTop:i.position().top},{duration:n})}},validateQuiz:function(e,n){var i=this,r=[];if(!e.get("name")||e.get("name")===gettext("Untitled quiz")){var s=new d;return s.render({message:gettext("Please enter a name for your quiz."),ok:function(){var e=t(body);e.animate({scrollTop:e.position().top},{duration:1e3})}}),!1}if(0==e.questions.length){var s=new d;return s.render({message:gettext("A quiz must have at least one question."),okBtn:gettext("Delete Quiz"),cancelBtn:!0,ok:function(){i.removeQuiz(n),t(window).off("beforeunload")}}),!1}var a=[];o.each(e.questions,function(t,n){t.get("order")!==n+1&&(t.set("order",n+1),e.sortQuestions());var s=i.selectQuestionDiv(t);null!==s&&s.removeClass("invalidQuestion"),t.attributes.dirty===!0&&p(t)===!1&&(r.push("error"),a.push(t),null!==s&&s.addClass("invalidQuestion"),o.isEmpty(a)||i.scrollToQuestion(a[0]))});var u=r.length;return u>0?(e.questions.length<1,!1):!0}}),v={};return v.view=new m,r.router.route("edit-quiz","edit-quiz"),r.router.route("edit-quiz/:soc_number","edit-quiz"),r.router.on("route:edit-quiz",function(e){c.getCookieData()&&c.isTeacher()?(o.isNull(e)?(v.view.soc_number=null,v.view.quiz=null,v.view.title="Create Quiz"):(v.view.soc_number=e,v.view.title="Edit Quiz"),v.view.onNavigatedTo()):window.location.href="/"}),v}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,o;i=[n(3),n(1),n(17),n(9),n(11),n(175)],o=function(e,t,n,i,o){var r=t.View.extend({el:"#main-content",events:{"click #share-email":function(){n.navigate("send-to",!0)},"click #no-share":function(){n.navigate("manage-quizzes",!0)}},render:function(){i.render("quizzes/share-quiz/",this.$el)}}),s={};return s.view=new r,n.route("share-quiz","share-quiz"),n.on("route:share-quiz",function(){s.view.render()}),s}.apply(t,i),!(void 0!==o&&(e.exports=o))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;(function(__webpack_provided_window_dot_jQuery){__WEBPACK_AMD_DEFINE_RESULT__=function(require){navigator.userAgent.match(/MSIE (8|9)/)&&("object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,s,a=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(r=u.length,n=0;r>n;n+=1)s[n]=str(n,u)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,u),o&&s.push(quote(i)+(gap?": ":":")+o));else for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(o=str(i,u),o&&s.push(quote(i)+(gap?": ":":")+o));return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),/**
	 * History.js jQuery Adapter
	 * @author Benjamin Arthur Lupton <contact@balupton.com>
	 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
	 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
	 */
function(e,t){"use strict";var n=e.History=e.History||{},i=__webpack_provided_window_dot_jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,n,i){var o=n&&n.originalEvent&&n.originalEvent[e]||i&&i[e]||t;return o},onDomLoad:function(e){i(e)}},"undefined"!=typeof n.init&&n.init()}(window),/**
	 * History.js HTML4 Support
	 * Depends on the HTML5 Support
	 * @author Benjamin Arthur Lupton <contact@balupton.com>
	 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
	 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
	 */
function(e,t){"use strict";var n=e.document,i=e.setTimeout||i,o=e.clearTimeout||o,r=e.setInterval||r,s=e.History=e.History||{};if("undefined"!=typeof s.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");s.initHtml4=function(){return"undefined"!=typeof s.initHtml4.initialized?!1:(s.initHtml4.initialized=!0,s.enabled=!0,s.savedHashes=[],s.isLastHash=function(e){var t,n=s.getHashByIndex();return t=e===n},s.isHashEqual=function(e,t){return e=encodeURIComponent(e).replace(/%25/g,"%"),t=encodeURIComponent(t).replace(/%25/g,"%"),e===t},s.saveHash=function(e){return s.isLastHash(e)?!1:(s.savedHashes.push(e),!0)},s.getHashByIndex=function(e){var t=null;return t="undefined"==typeof e?s.savedHashes[s.savedHashes.length-1]:0>e?s.savedHashes[s.savedHashes.length+e]:s.savedHashes[e]},s.discardedHashes={},s.discardedStates={},s.discardState=function(e,t,n){var i,o=s.getHashByState(e);return i={discardedState:e,backState:n,forwardState:t},s.discardedStates[o]=i,!0},s.discardHash=function(e,t,n){var i={discardedHash:e,backState:n,forwardState:t};return s.discardedHashes[e]=i,!0},s.discardedState=function(e){var t,n=s.getHashByState(e);return t=s.discardedStates[n]||!1},s.discardedHash=function(e){var t=s.discardedHashes[e]||!1;return t},s.recycleState=function(e){var t=s.getHashByState(e);return s.discardedState(e)&&delete s.discardedStates[t],!0},s.emulated.hashChange&&(s.hashChangeInit=function(){s.checkerFunction=null;var t,i,o,a,u="",c=Boolean(s.getHash());return s.isInternetExplorer()?(t="historyjs-iframe",i=n.createElement("iframe"),i.setAttribute("id",t),i.setAttribute("src","#"),i.style.display="none",n.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),o="",a=!1,s.checkerFunction=function(){if(a)return!1;a=!0;var t=s.getHash(),n=s.getHash(i.contentWindow.document);return t!==u?(u=t,n!==t&&(o=n=t,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=s.escapeHash(t)),s.Adapter.trigger(e,"hashchange")):n!==o&&(o=n,c&&""===n?s.back():s.setHash(n,!1)),a=!1,!0}):s.checkerFunction=function(){var t=s.getHash()||"";return t!==u&&(u=t,s.Adapter.trigger(e,"hashchange")),!0},s.intervalList.push(r(s.checkerFunction,s.options.hashChangeInterval)),!0},s.Adapter.onDomLoad(s.hashChangeInit)),s.emulated.pushState&&(s.onHashChange=function(t){var n,i=t&&t.newURL||s.getLocationHref(),o=s.getHashByUrl(i),r=null,a=null;return s.isLastHash(o)?(s.busy(!1),!1):(s.doubleCheckComplete(),s.saveHash(o),o&&s.isTraditionalAnchor(o)?(s.Adapter.trigger(e,"anchorchange"),s.busy(!1),!1):(r=s.extractState(s.getFullUrl(o||s.getLocationHref()),!0),s.isLastSavedState(r)?(s.busy(!1),!1):(a=s.getHashByState(r),(n=s.discardedState(r))?(s.getHashByIndex(-2)===s.getHashByState(n.forwardState)?s.back(!1):s.forward(!1),!1):(s.pushState(r.data,r.title,encodeURI(r.url),!1),!0))))},s.Adapter.bind(e,"hashchange",s.onHashChange),s.pushState=function(t,n,i,o){if(i=encodeURI(i).replace(/%25/g,"%"),s.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(o!==!1&&s.busy())return s.pushQueue({scope:s,callback:s.pushState,args:arguments,queue:o}),!1;s.busy(!0);var r=s.createStateObject(t,n,i),a=s.getHashByState(r),u=s.getState(!1),c=s.getHashByState(u),l=s.getHash(),d=s.expectedStateId==r.id;return s.storeState(r),s.expectedStateId=r.id,s.recycleState(r),s.setTitle(r),a===c?(s.busy(!1),!1):(s.saveState(r),d||s.Adapter.trigger(e,"statechange"),s.isHashEqual(a,l)||s.isHashEqual(a,s.getShortUrl(s.getLocationHref()))||s.setHash(a,!1),s.busy(!1),!0)},s.replaceState=function(t,n,i,o){if(i=encodeURI(i).replace(/%25/g,"%"),s.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(o!==!1&&s.busy())return s.pushQueue({scope:s,callback:s.replaceState,args:arguments,queue:o}),!1;s.busy(!0);var r=s.createStateObject(t,n,i),a=s.getHashByState(r),u=s.getState(!1),c=s.getHashByState(u),l=s.getStateByIndex(-2);return s.discardState(u,r,l),a===c?(s.storeState(r),s.expectedStateId=r.id,s.recycleState(r),s.setTitle(r),s.saveState(r),s.Adapter.trigger(e,"statechange"),s.busy(!1)):s.pushState(r.data,r.title,r.url,!1),!0}),void(s.emulated.pushState&&s.getHash()&&!s.emulated.hashChange&&s.Adapter.onDomLoad(function(){s.Adapter.trigger(e,"hashchange")})))},"undefined"!=typeof s.init&&s.init()}(window),/**
	 * History.js Core
	 * @author Benjamin Arthur Lupton <contact@balupton.com>
	 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
	 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
	 */
function(e,t){"use strict";var n=e.console||t,i=e.document,o=e.navigator,r=!1,s=e.setTimeout,a=e.clearTimeout,u=e.setInterval,c=e.clearInterval,l=e.JSON,d=e.alert,p=e.History=e.History||{},h=e.history;try{r=e.sessionStorage,r.setItem("TEST","1"),r.removeItem("TEST")}catch(f){r=!1}if(l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode,"undefined"!=typeof p.init)throw new Error("History.js Core has already been loaded...");p.init=function(e){return"undefined"==typeof p.Adapter?!1:("undefined"!=typeof p.initCore&&p.initCore(),"undefined"!=typeof p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(f){if("undefined"!=typeof p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||i.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var e,t=p.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)c(t[e]);p.intervalList=null}},p.debug=function(){p.options.debug&&p.log.apply(p,arguments)},p.log=function(){var e,t,o,r,s,a=!("undefined"==typeof n||"undefined"==typeof n.log||"undefined"==typeof n.log.apply),u=i.getElementById("log");for(a?(r=Array.prototype.slice.call(arguments),e=r.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[e,r]):n.log.apply(n,[e,r])):e="\n"+arguments[0]+"\n",t=1,o=arguments.length;o>t;++t){if(s=arguments[t],"object"==typeof s&&"undefined"!=typeof l)try{s=l.stringify(s)}catch(c){}e+="\n"+s+"\n"}return u?(u.value+=e+"\n-----\n",u.scrollTop=u.scrollHeight-u.clientHeight):a||d(e),!0},/**
	         * History.getInternetExplorerMajorVersion()
	         * Get's the major version of Internet Explorer
	         * @return {integer}
	         * @license Public Domain
	         * @author Benjamin Arthur Lupton <contact@balupton.com>
	         * @author James Padolsey <https://gist.github.com/527683>
	         */
p.getInternetExplorerMajorVersion=function(){var e=p.getInternetExplorerMajorVersion.cached="undefined"!=typeof p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4?e:!1}();return e},/**
	         * History.isInternetExplorer()
	         * Are we using Internet Explorer?
	         * @return {boolean}
	         * @license Public Domain
	         * @author Benjamin Arthur Lupton <contact@balupton.com>
	         */
p.isInternetExplorer=function(){var e=p.isInternetExplorer.cached="undefined"!=typeof p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());return e},p.options.html4Mode?p.emulated={pushState:!0,hashChange:!0}:p.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(o.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(o.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in i)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},p.cloneObject=function(e){var t,n;return e?(t=l.stringify(e),n=l.parse(t)):n={},n},p.getRootUrl=function(){var e=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(e+=":"+i.location.port),e+="/"},p.getBaseHref=function(){var e=i.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},p.getBaseUrl=function(){var e=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return e},p.getPageUrl=function(){var e,t=p.getState(!1,!1),n=(t||{}).url||p.getLocationHref();return e=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},p.getBasePageUrl=function(){var e=p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},p.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t="undefined"==typeof t?!0:t,/[a-z]+\:\/\//.test(e)||(n="/"===i?p.getRootUrl()+e.replace(/^\/+/,""):"#"===i?p.getPageUrl().replace(/#.*/,"")+e:"?"===i?p.getPageUrl().replace(/[\?#].*/,"")+e:t?p.getBaseUrl()+e.replace(/^(\.\/)+/,""):p.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},p.getShortUrl=function(e){var t=e,n=p.getBaseUrl(),i=p.getRootUrl();return p.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),p.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(e){return e=e||i,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var n=p.getLastSavedState();return!n&&t&&(n=p.createStateObject()),e&&(n=p.cloneObject(n),n.url=n.cleanUrl||n.url),n},p.getIdByState=function(e){var t,n=p.extractId(e.url);if(!n)if(t=p.getStateString(e),"undefined"!=typeof p.stateToId[t])n=p.stateToId[t];else if("undefined"!=typeof p.store.stateToId[t])n=p.store.stateToId[t];else{for(;;)if(n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof p.idToState[n]&&"undefined"==typeof p.store.idToState[n])break;p.stateToId[t]=n,p.idToState[n]=e}return n},p.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=p.getFullUrl(e.url?e.url:p.getLocationHref()),t.hash=p.getShortUrl(t.url),t.data=p.cloneObject(e.data),t.id=p.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!p.isEmptyObject(t.data),(t.title||n)&&p.options.disableSuid!==!0&&(t.hash=p.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=p.getFullUrl(t.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},p.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=p.normalizeState(i)},p.getStateById=function(e){e=String(e);var n=p.idToState[e]||p.store.idToState[e]||t;return n},p.getStateString=function(e){var t,n,i;return t=p.normalizeState(e),n={data:t.data,title:e.title,url:e.url},i=l.stringify(n)},p.getStateId=function(e){var t,n;return t=p.normalizeState(e),n=t.id},p.getHashByState=function(e){var t,n;return t=p.normalizeState(e),n=t.hash},p.extractId=function(e){var t,n,i,o;return o=-1!=e.indexOf("#")?e.split("#")[0]:e,n=/(.*)\&_suid=([0-9]+)$/.exec(o),i=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},p.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},p.extractState=function(e,t){var n,i,o=null;return t=t||!1,n=p.extractId(e),n&&(o=p.getStateById(n)),o||(i=p.getFullUrl(e),n=p.getIdByUrl(i)||!1,n&&(o=p.getStateById(n)),o||!t||p.isTraditionalAnchor(e)||(o=p.createStateObject(null,null,i))),o},p.getIdByUrl=function(e){var n=p.urlToId[e]||p.store.urlToId[e]||t;return n},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||t},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||t},p.hasUrlDuplicate=function(e){var t,n=!1;return t=p.extractState(e.url),n=t&&t.id!==e.id},p.storeState=function(e){return p.urlToId[e.url]=e.id,p.storedStates.push(p.cloneObject(e)),e},p.isLastSavedState=function(e){var t,n,i,o=!1;return p.savedStates.length&&(t=e.id,n=p.getLastSavedState(),i=n.id,o=t===i),o},p.saveState=function(e){return p.isLastSavedState(e)?!1:(p.savedStates.push(p.cloneObject(e)),!0)},p.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?p.savedStates[p.savedStates.length-1]:0>e?p.savedStates[p.savedStates.length+e]:p.savedStates[e]},p.getCurrentIndex=function(){var e=null;return e=p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(e){var t,n=p.getLocationHref(e);return t=p.getHashByUrl(n)},p.unescapeHash=function(e){var t=p.normalizeHash(e);return t=decodeURIComponent(t)},p.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},p.setHash=function(e,t){var n,o;return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:t}),!1):(p.busy(!0),n=p.extractState(e,!0),n&&!p.emulated.pushState?p.pushState(n.data,n.title,n.url,!1):p.getHash()!==e&&(p.bugs.setHash?(o=p.getPageUrl(),p.pushState(null,null,o+"#"+e,!1)):i.location.hash=e),p)},p.escapeHash=function(t){var n=p.normalizeHash(t);return n=e.encodeURIComponent(n),p.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},p.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=p.unescapeHash(t)},p.setTitle=function(e){var t,n=e.title;n||(t=p.getStateByIndex(0),t&&t.url===e.url&&(n=t.title||p.options.initialTitle));try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(o){}return i.title=n,p},p.queues=[],p.busy=function(e){if("undefined"!=typeof e?p.busy.flag=e:"undefined"==typeof p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){a(p.busy.timeout);var t=function(){var e,n,i;if(!p.busy.flag)for(e=p.queues.length-1;e>=0;--e)n=p.queues[e],0!==n.length&&(i=n.shift(),p.fireQueueItem(i),p.busy.timeout=s(t,p.options.busyDelay))};p.busy.timeout=s(t,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(e){return e.callback.apply(e.scope||p,e.args||[])},p.pushQueue=function(e){return p.queues[e.queue||0]=p.queues[e.queue||0]||[],p.queues[e.queue||0].push(e),p},p.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),p.busy()?p.pushQueue(e):p.fireQueueItem(e),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(a(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(e){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=s(function(){return p.doubleCheckClear(),p.stateChanged||e(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var t,n=p.extractState(p.getLocationHref());if(!p.isLastSavedState(n))return t=n,t||(t=p.createStateObject()),p.Adapter.trigger(e,"popstate"),p},p.back=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),h.go(-1),!0)},p.forward=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),h.go(1),!0)},p.go=function(e,t){var n;if(e>0)for(n=1;e>=n;++n)p.forward(t);else{if(!(0>e))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)p.back(t)}return p},p.emulated.pushState){var g=function(){};p.pushState=p.pushState||g,p.replaceState=p.replaceState||g}else p.onPopState=function(t,n){var i,o,r=!1,s=!1;return p.doubleCheckComplete(),(i=p.getHash())?(o=p.extractState(i||p.getLocationHref(),!0),o?p.replaceState(o.data,o.title,o.url,!1):(p.Adapter.trigger(e,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(r=p.Adapter.extractEventData("state",t,n)||!1,s=r?p.getStateById(r):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()),s||(s=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(s)?(p.busy(!1),!1):(p.storeState(s),p.saveState(s),p.setTitle(s),p.Adapter.trigger(e,"statechange"),p.busy(!1),!0))},p.Adapter.bind(e,"popstate",p.onPopState),p.pushState=function(t,n,i,o){if(p.getHashByUrl(i)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:o}),!1;p.busy(!0);var r=p.createStateObject(t,n,i);return p.isLastSavedState(r)?p.busy(!1):(p.storeState(r),p.expectedStateId=r.id,h.pushState(r.id,r.title,r.url),p.Adapter.trigger(e,"popstate")),!0},p.replaceState=function(t,n,i,o){if(p.getHashByUrl(i)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(o!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:o}),!1;p.busy(!0);var r=p.createStateObject(t,n,i);return p.isLastSavedState(r)?p.busy(!1):(p.storeState(r),p.expectedStateId=r.id,h.replaceState(r.id,r.title,r.url),p.Adapter.trigger(e,"popstate")),!0};if(r){try{p.store=l.parse(r.getItem("History.store"))||{}}catch(m){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(e,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),r&&(p.onUnload=function(){var e,t,n;try{e=l.parse(r.getItem("History.store"))||{}}catch(i){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in p.idToState)p.idToState.hasOwnProperty(t)&&(e.idToState[t]=p.idToState[t]);for(t in p.urlToId)p.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=p.urlToId[t]);for(t in p.stateToId)p.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=p.stateToId[t]);p.store=e,p.normalizeStore(),n=l.stringify(e);try{r.setItem("History.store",n)}catch(o){if(o.code!==DOMException.QUOTA_EXCEEDED_ERR)throw o;r.length&&(r.removeItem("History.store"),r.setItem("History.store",n))}},p.intervalList.push(u(p.onUnload,p.options.storeInterval)),p.Adapter.bind(e,"beforeunload",p.onUnload),p.Adapter.bind(e,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(u(p.safariStatePoll,p.options.safariPollInterval)),("Apple Computer, Inc."===o.vendor||"Mozilla"===(o.appCodeName||""))&&(p.Adapter.bind(e,"hashchange",function(){p.Adapter.trigger(e,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(e,"hashchange")})))},p.options&&p.options.delayInit||p.init()}(window))}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}).call(exports,__webpack_require__(3))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i;i=function(e){var t=n(2),i=n(53),o=n(20),r=new i({defaults:{instance_id:null}});return r.isInProgress=function(){return r.has("activity_id")},r.validateCachedQuiz=function(){if(!this.has("quiz"))return!1;var e=r.get("quiz");return t.isObject(e)&&t.isFunction(e.has)&&t.isFunction(e.get)?e.get("id")!==r.get("activity_id")?(r.unset("quiz"),!1):t.isArray(e.questions)?!0:(console.warn("Got bad quiz data - a quiz with no questions",e),r.unset("quiz"),!0):(console.warn("Quiz is set on offlineActivity, but it's not a backbone model",e),r.unset("quiz"),!1)},r.getCurrentQuiz=function(e){if(!this.has("activity_id"))return void e(null);if(r.validateCachedQuiz())e(this.get("quiz"));else{var n=new o({id:this.get("activity_id")});n.fetch({success:function(){n.initialize(),r.set("quiz",n),e(n),r.has("quiz")&&t.isUndefined(r.get("quiz").questions)&&console.warn("Got a quiz with no questions",n)}})}},r.getSettings=function(){var e={};return this.has("settings")?(t.each(this.get("settings"),function(t){e[t.key]=t.value}),e.getBooleanSetting=function(e){var n=this[e];return t.isUndefined(n)||!t.isString(n)?!1:"true"==n.toLowerCase()},e):e},r}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,o;i=[n(3),n(2),n(36),n(8)],o=function(e,t,n,i){var o={};return o.loadedTags=[],o.loadTags=function(n){return o.loadedTags.length>0&&t.isFunction(n)?void n(o.loadedTags):void i({type:"GET",dataType:"json",url:window.static_url+"data/tags.json",success:function(i){t.isString(i)?o.loadedTags=e.parseJSON(i):o.loadedTags=i,o.loadedTags=t.sortBy(o.loadedTags,function(e){return e.id}),t.isFunction(n)&&n(o.loadedTags)}})},o}.apply(t,i),!(void 0!==o&&(e.exports=o))},function(e,t,n){var i;i=function(e){var t=n(3),i={start:function(e){var n=this,i='<div class="notify-container"><i data-icon="s"></i>'+e+"</div>";t("#body").append(i),t(".notify-container").slideDown(200),setTimeout(function(){n.stop()},2e3)},stop:function(){t(".notify-container").slideUp(200,function(){t(this).remove()})}};return i}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,function(e,t,n){function i(){o.localUser.set({mode:"teacher"},{silent:!0}),o.localUser.isAuthenticated()||o.localUser.getCookieData(),o.localRoom.has("id")||o.localRoom.has("name")||!o.localUser.has("auth_token")||o.localRoom.join({roomname:"",auth_token:o.localUser.get("auth_token"),error:function(){r.showLoginError()}})}var o=n(139),r=n(142);e.exports=new i},function(e,t,n){var i=n(1),o=i.Model.extend({localUser:n(5),localRoom:n(14)});e.exports=new o},,function(e,t,n){var i=n(1);n(145),n(144),n(86),n(99),n(100),n(101);var o=n(180),r=null,s=null,a=null,u=null,c=null,l=null,d=null,p=null,h=null,f=null,g=i.Router.extend({initialize:function(){checkTime.reset(),initTemplateLoader.stop(),this.listenTo(o,"routeTo:index",this.routeToIndex),this.listenTo(o,"routeTo:teacherProfile",this.routeToTeacherProfile),this.listenTo(o,"routeTo:selectQuiz",this.routeToSelectQuiz),this.listenTo(o,"routeTo:createQuestion",this.routeToCreateQuestion),this.listenTo(o,"routeTo:spaceRaceControls",this.routeToSpaceRaceControls),this.listenTo(o,"routeTo:liveResults",this.routeToLiveResults)},routes:{"":"teacher","teacher-login/:authToken":"teacherLoginAuthToken",dashboard:"teacherDashboard","select-quiz":"selectQuiz","start-quiz/:socNumber":"startQuiz","space-race-controls":"spaceRaceControls","space-race":"spaceRace","manage-quizzes":"manageQuizzes","my-quizzes":"myQuizzes","create-question":"createQuestion","short-answer":"shortAnswer","import-quiz":"importQuiz",reports:"reports"},teacher:function(){this.routeToDashboardAndReplace()},teacherLoginAuthToken:function(e){this.loadTeacherLoginAuthTokenController(function(){r.doLogin(e)})},teacherDashboard:function(){o.doTeacherDashboard()},selectQuiz:function(){this.loadQuizListController(function(){a.doQuizList("Select Quiz")})},startQuiz:function(e){this.loadStartQuizController(function(){u.doStartQuiz(e)})},spaceRaceControls:function(){this.loadSpaceRaceControlsController(function(){l.doSpaceRaceControls()})},spaceRace:function(){this.loadSpaceRaceController(function(){d.doSpaceRace()})},manageQuizzes:function(){this.loadManageQuizzesController(function(){s.doManageQuizzes()})},myQuizzes:function(){this.loadQuizListController(function(){a.doQuizList("My Quizzes")})},createQuestion:function(){this.loadCreateQuestionController(function(){p.doCreateQuestion()})},shortAnswer:function(){this.loadShortAnswerController(function(){h.doShortAnswer()})},importQuiz:function(){this.loadImportQuizController(function(){c.doImportQuiz()})},reports:function(){this.loadReportsController(function(){f.doReportsPage()})},loadTeacherLoginAuthTokenController:function(e){var t=this;null==r?n.e(15,function(i){r=n(85),t.listenTo(r,"routeTo:dashboardAndReplace",t.routeToDashboardAndReplace),t.listenTo(r,"routeTo:index",t.routeToIndex),e()}):e()},loadManageQuizzesController:function(e){var t=this;null==s?n.e(12,function(i){s=n(92),t.listenTo(s,"routeTo:editQuizSoc",t.routeToEditQuizSoc),t.listenTo(s,"routeTo:importQuiz",t.routeToImportQuiz),t.listenTo(s,"routeTo:myQuizzes",t.routeToMyQuizzes),t.listenTo(s,"routeTo:reports",t.routeToReports),e()}):e()},loadQuizListController:function(e){var t=this;null==a?n.e(7,function(i){a=n(93),t.listenTo(a,"routeTo:createQuiz",t.routeToCreateQuiz),t.listenTo(a,"routeTo:startQuiz",t.routeToStartQuiz),t.listenTo(a,"routeTo:editQuizSoc",t.routeToEditQuizSoc),t.listenTo(a,"routeTo:editQuiz",t.routeToEditQuiz),e()}):e()},loadStartQuizController:function(e){var t=this;null==u?n.e(9,function(i){u=n(98),t.listenTo(u,"routeTo:liveResults",t.routeToLiveResults),e()}):e()},loadSpaceRaceControlsController:function(e){var t=this;null==l?n.e(10,function(i){l=n(97),t.listenTo(l,"routeTo:spaceRace",t.routeToSpaceRace),e()}):e()},loadSpaceRaceController:function(e){var t=this;null==d?n.e(11,function(i){d=n(96),t.listenTo(d,"routeTo:dashboard",t.routeToDashboard),t.listenTo(d,"routeTo:dynamic",t.routeToDynamic),e()}):e()},loadCreateQuestionController:function(e){var t=this;null==p?n.e(14,function(i){p=n(90),t.listenTo(p,"routeTo:create-question",t.routeToCreateQuestion),t.listenTo(p,"routeTo:live-results",t.routeToLiveResults),t.listenTo(p,"routeTo:shortAnswer",t.routeToShortAnswer),e()}):e()},loadShortAnswerController:function(e){var t=this;null==h?n.e(4,function(i){h=n(95),t.listenTo(h,"routeTo:liveResults",t.routeToLiveResults),e()}):e()},loadImportQuizController:function(e){null==c?n.e(13,function(t){c=n(91),e()}):e()},loadReportsController:function(e){null==f?n.e(6,function(t){f=n(94),e()}):e()},routeToIndex:function(){window.location.href="/"},routeToTeacherProfile:function(){this.navigate("teacher-profile",{trigger:!0})},routeToDashboardAndReplace:function(){this.navigate("dashboard",{trigger:!0,replace:!0})},routeToDashboard:function(){this.navigate("dashboard",{trigger:!0})},routeToSelectQuiz:function(){this.navigate("select-quiz",{trigger:!0})},routeToSpaceRaceControls:function(){this.navigate("space-race-controls",{trigger:!0})},routeToLiveResults:function(){this.navigate("live-results",{trigger:!0})},routeToEditQuizSoc:function(e){this.navigate("edit-quiz/"+e.soc_number,{trigger:!0})},routeToEditQuiz:function(e){this.navigate("edit-quiz",{trigger:!0})},routeToImportQuiz:function(){this.navigate("import-quiz",{trigger:!0})},routeToMyQuizzes:function(){this.navigate("my-quizzes",{trigger:!0})},routeToReports:function(){this.navigate("reports",{trigger:!0})},routeToCreateQuiz:function(){this.navigate("create-quiz",{trigger:!0})},routeToStartQuiz:function(e){this.navigate("start-quiz/"+e.socNumber,{trigger:!0})},routeToSpaceRace:function(){this.navigate("space-race",{trigger:!0})},routeToDynamic:function(e){this.navigate(e.route,{trigger:!0})},routeToCreateQuestion:function(){this.navigate("create-question",{trigger:!0})},routeToShortAnswer:function(){this.navigate("short-answer",{trigger:!0})}});e.exports=new g},function(e,t,n){function i(){this.showLoginError=function(){var e=new o;e.render({message:gettext("There was an error when trying to login!"),ok:function(){window.location.href="/"}})}}var o=n(10);e.exports=new i},,function(e,t,n){var i;i=function(e){var t=n(3),i=n(1),o=n(2),r=n(8),s=n(18),a=n(17),u=n(9),c=n(5),l=n(14),d=n(12),p=n(35),h=n(11),f=n(10),g=n(32),m=n(49),v="https://www.masteryconnect.com/schools_for_zip/",A="https://www.masteryconnect.com/schools_for_country/",y=i.View.extend({el:"#main-content",context:null,alertShown:!1,role:[],schools:{schools:[],nearby_schools:[]},sa:!1,render:function(){var e=this;!l.has("name")&&c.has("room")&&l.set("name",c.get("room")),this.templateUrl="/lecturers/teacher-profile/",h.resetAll({title:gettext("My profile")}),u.render(this.templateUrl,t(this.el),function(){function n(){console.log(e.context),e.context.schools||(e.context.schools=!1),e.context.googleUser=c.get("googleUser");var n=o.template(t("#teacher-profile-template").html());t("#center-content").html(n(e.context)),c.has("email")||c.set("email",e.context.email),e.organizationType=t("#organization-type"),e.context.organization_type&&e.organizationType.find("#"+e.context.organization_type.toLowerCase()).attr("selected","selected"),e.afterRender(e.context),e.attachEvents(e.context)}e.context?n():r({url:window.backend_host+"/lecturers/display-teacher-profile/"+c.get("auth_token"),dataType:"json",type:"GET",success:function(t,i,o){e.context=t,e.context.changePassword=!1,n()},error:function(e,t,n){}})})},afterRender:function(e){var n=this;n.firstName=t(".firstname"),n.lastName=t(".lastname"),n.emailInput=t("#email1"),n.roomNameInput=t("#room_name_input"),n.passwordDiv=t(".password"),n.countryDiv=t(".country-container"),n.languageOptions=n.countryDiv.find(".language-options"),n.zipCode=t("#zip"),n.stateInput=t("#states"),n.schoolSelect=t("#schoolListSelect"),n.schoolManualInput=t("#schoolManualInput input"),n.organizationName=t(".organization-name"),n.usheNameDiv=t("#organization-name-container"),n.roleDiv=t(".role");var i=n.countryDiv.find('#country option[text="'+n.context.country+'"]');if(i.length)i.attr("selected","selected");else{var i=n.countryDiv.find('#country option[value="'+n.context.country+'"]');i.length&&i.attr("selected","selected")}if("USHE"===n.context.organization_type&&o.contains(["US","USA"],n.context.country)&&n.stateInput.find("option[value="+n.context.state+"]").attr("selected","selected"),t("#center-content").on("click",function(e){var t=n.countryDiv.find("#language");t.is(e.target)||0!==t.has(e.target).length?n.languageOptions.toggle():n.languageOptions.hide()}),n.languageOptions.find("li").on("click",function(e){var t=e.target?e.target:e.srcElement;if(navigator.userAgent.match(/MSIE (9|10)/))var i=t.getAttribute("data-country");else var i=t.dataset.country;n.context.language=i,n.render()}),d.refresh(function(){if(d.isInProgress()){if(n.alertShown===!1){n.alertShown=!0;var e=new f;e.render({message:gettext("There is a live activity.  Room name and language can not be changed until activity is finished.")})}n.roomNameInput.prop("disabled",!0),n.countryDiv.find("#language").addClass("disabled"),t("#center-content").unbind()}}),"US"==n.context.country&&"K12"==n.context.organization_type&&n.context.zip_code&&n.context.schools===!1)t.ajax({url:v+n.context.zip_code+".json",type:"GET",dataType:"jsonp",success:function(e){n.context.schools=e,n.render()}});else if(n.context.country&&"US"!=n.context.country&&"K12"==n.context.organization_type&&(!n.context.schoolsByCountry||!n.context.schoolsByCountry[n.context.country])){n.context.schoolsByCountry||(n.context.schoolsByCountry={});var r=encodeURIComponent(n.context.country.replace(/\./g,"--"));t.ajax({url:A+r+".json",type:"GET",dataType:"jsonp",crossDomain:!0,success:function(e){e.schools&&(n.context.schoolsByCountry[n.context.country]=e.schools),n.render()}})}(n.context.googleUser===!0||n.context.mastery_connect===!0)&&n.emailInput.attr("disabled",!0)},attachEvents:function(){var e=this;e.firstName.on("blur",function(t){var n=t.target.value;e.context.first_name=n,e.validation.first_name(e)}),e.lastName.on("blur",function(t){var n=t.target.value;e.context.last_name=n,e.validation.last_name(e)}),e.emailInput.on("blur",function(t){var n=t.target.value;e.validation.email(e),n!==e.context.email&&(n!==c.get("email")?r({url:window.backend_host+"/users/check-email/",type:"POST",dataType:"json",data:{new_email:n},success:function(){e.hideError(e.emailInput),e.context.email=n,c.set("email",n),e.validation.email(e)},error:function(t){e.context.email=c.get("email"),e.render(),e.showError(e.emailInput,gettext("The email address:")+' "'+n+'" '+gettext("is already registered."),!0),e.validation.email(e)}}):e.context.email=c.get("email"))}),e.passwordDiv.find(".password-input").on("click",function(t){e.context.changePassword=!0,e.render()}),e.passwordDiv.find(".new-password-input").on("blur",function(t){e.context.password=t.target.value,e.validation.password(e)}),e.passwordDiv.find(".confirm-new-password-input").on("blur",function(t){e.context.password2=t.target.value,e.validation.password(e)}),e.roomNameInput.on("blur",function(t){var n=t.target.value;if(n!==e.context.roomName)if(e.context.roomName=n,n!==l.get("name")){if(!e.validation.roomName(e))return;r({url:window.backend_host+"/rooms/api/check-room-name/",type:"POST",dataType:"json",data:{new_room_name:n},success:function(){e.context.roomName=n},error:function(t){e.context.roomName=l.get("name"),e.render(),e.showError(e.roomNameInput,gettext("The room name:")+' "'+n+'" '+gettext("is not available."),!0)}})}else e.render()}),e.countryDiv.find("#country").on("change",function(t){var n=t.target.value;e.context.country=n,e.context.organization_type="",e.render(),e.validation.country(e),"US"!==n?(e.organizationType.find("#k12").text(gettext("Primary/Secondary School")),e.organizationType.find("#ushe").text(gettext("University"))):(e.organizationType.find("#k12").text(gettext("K-12")),e.organizationType.find("#ushe").text(gettext("Higher Ed")))}),e.organizationType.on("change",function(t){var n=t.target.value;e.context.organization_type=n,e.context.school_name="",e.context.description="",e.context.university="",e.render(),e.validation.organization_type(e)}),e.stateInput.on("change",function(t){var n=t.target.value;e.context.state=n,e.render(),e.validation.state(e)}),e.zipCode.on("input",function(n){var i=n.target.value;5===i.length&&(e.zipCode.attr("disabled",!0).addClass("disabled"),e.zipCode.siblings(".spinny").show(),t.ajax({url:v+i+".json",type:"GET",dataType:"jsonp",crossDomain:!0,success:function(t){e.context.zip_code=i,e.context.school_id=0,e.context.schools=t,e.zipCode.attr("disabled",!1).removeClass("disabled"),e.render()},complete:function(){e.zipCode.siblings(".spinny").hide()}}))}),e.zipCode.on("blur",function(t){e.context.zip_code=t.target.value,e.validation.zip_code(e)}),e.schoolSelect.on("change",function(t){var n=t.target.value;if(e.schoolSelected=!0,e.orgName="","no-school"===n)e.context.school_data={},e.context.school_id=-1,e.context.school_name="",e.context.district="",e.context.state="";else if(n){n=parseInt(n),e.context.school_id=n;var i=o.filter(e.context.schools.schools,function(e){return e.id===n});0===i.length&&(i=o.filter(e.context.schools.nearby_schools,function(e){return e.id===n})),i=i[0],e.context.school_data=i,"school_name"in i&&(e.context.school_name=i.school_name),"district_name"in i&&(e.context.district=i.district_name),"state_code"in i&&(e.context.state=i.state_code)}else e.context.school_id=0;e.render(),e.validation.school_select(e)}),e.schoolManualInput.on("blur",function(t){var n=t.target.value;return e.context.school_name=n,e.validation.school_name(e),0===n.length?void e.showError(e.usheNameDiv,gettext("Please enter your school's name.")):void 0}),e.usheNameDiv.find("input").on("blur",function(t){var n=t.target.value;e.context.university=n,e.validation.ushe_name(e)}),e.organizationName.on("blur",function(t){var n=t.target.value,i=e.context.organization_type;"USHE"==i?e.context.university=n:o.contains(["CORP","OTHR"],i)&&(e.context.description=n),e.validation.organization_name(e)}),t("#int-school-name").on("blur",function(t){var n=t.currentTarget.value;e.context.school_name=n;var i=null;e.context.schoolsByCountry&&n&&n.length>0&&(i=o.filter(e.context.schoolsByCountry[e.context.country],function(e){return e.school_name.toLowerCase()==n.toLowerCase()})),i&&1==i.length?(e.context.school_id=i[0].id,e.context.school_data=i[0]):(e.context.school_id=-1,e.context.school_data=""),e.validation.int_school_name(e)}),e.roleDiv.find("input").on("click",function(t){e.hideError(e.roleDiv),t.target.checked?e.context.user_role.push(t.target.id):e.context.user_role=o.filter(e.context.user_role,function(e){return e!==t.target.id})}),t("#create-account-button").on("click",function(t){function n(){r({url:window.backend_host+"/lecturers/update-teacher-profile/",dataType:"json",contentType:"application/json",type:"POST",data:JSON.stringify({auth_token:c.get("auth_token"),firstName:e.context.first_name,lastName:e.context.last_name,email:e.context.email,password:e.context.password,roomName:e.context.roomName,country:e.context.country,language:e.context.language,orgType:e.context.organization_type,orgState:e.context.state,orgZip:e.context.zip_code,orgId:e.context.school_id,school_name:e.context.school_name,university:e.context.university,description:e.context.description,school_data:e.context.school_data,district_name:e.context.district,role:e.context.user_role}),success:function(t,n,i){var o=new g;o.render({message:gettext("Your changes have been saved."),ok:function(){l.set("name",e.context.roomName),l.unset("complete_user"),p.beginListen(e.context.roomName.toLowerCase()),e.context.language!==c.get("language")?(m.set("socrative_lang",e.context.language,{path:"/"}),c.set("language",e.context.language),a.navigate("dashboard"),window.location.reload()):a.navigate("dashboard",!0),e.context=null}})},error:function(t,n,i){var o=new f;o.render({message:gettext("There was an error while saving you changes."),ok:function(){e.sa=!1}}),analytics.track("Error:SaveStudentResponse",t),console.error(t),console.error(n),console.error(i)}})}var i=!1;if(console.log(e.context),!e.validation.first_name(e,!0))return void(i=!0);if(!e.validation.last_name(e,!0))return void(i=!0);if(e.context.changePassword&&!e.validation.password(e,!0))return void(i=!0);if(!e.validation.email(e,!0))return void(i=!0);if(!e.validation.roomName(e,!0))return void(i=!0);if(!e.validation.country(e,!0))return void(i=!0);if(!e.validation.organization_type(e,!0))return void(i=!0);var s=e.context.organization_type;if(o.contains(["US","USA"],e.context.country)){if("K12"===s){if(e.context.state="",e.context.university="",e.context.description="",!e.validation.zip_code(e,!0))return void(i=!0);if(!e.validation.school_select(e,!0))return void(i=!0);if(!e.validation.school_name(e,!0))return void(i=!0)}else if("USHE"===s){if(e.context.school_data={},e.context.school_name="",e.context.zip_code="",e.context.school_id="",!e.validation.state(e,!0))return void(i=!0);if(!e.validation.organization_name(e,!0))return void(i=!0)}}else{var s=e.context.organization_type;if("USHE"==s)e.context.school_name="",e.context.description="";else if("K12"==s){
if(!e.validation.school_name(e,!0))return void(i=!0);e.context.description="",e.context.university=""}else o.contains(["CORP","OTHR"],s)&&(e.context.school_name="",e.context.university="");"K12"!=s&&(e.context.school_data={},e.context.school_id=""),e.context.state="",e.context.zip_code="",e.context.district="",e.schoolSelected=!1}return e.validation.organization_name(e,!0)?0===e.context.user_role.length?(e.showError(e.roleDiv,gettext("Please choose your role."),!0),void(i=!0)):void(i===!1&&(e.context.roomName!==l.get("name")||e.context.language!==c.get("language")?c.clearRoom(function(){n()}):n())):void(i=!0)}),t("#cancelButton").on("click",function(){e.context=null,a.navigate("dashboard",!0)})},showError:function(e,t,n){var i=new f;e.addClass("form-danger"),n&&i.render({message:t})},hideError:function(e){e.removeClass("form-danger")},validation:{first_name:function(e,t){var n=e.context.first_name;return n?/^[a-zA-Z ]+$/.test(n)?(e.hideError(e.firstName),!0):(e.showError(e.firstName,gettext("The first name field should only contain alphabetic characters."),t),!1):(e.showError(e.firstName,gettext("The first name field should not be empty"),t),!1)},last_name:function(e,t){return e.context.last_name?/^[a-zA-Z ]+$/.test(e.context.last_name)?(e.hideError(e.lastName),!0):void e.showError(e.lastName,gettext("The last name field should only contain alphabetic characters."),t):(e.showError(e.lastName,gettext("The last name field should not be empty"),t),!1)},email:function(e,t){var n=e.context.email;if(!n)return e.showError(e.emailInput,gettext("Please enter a new email address."),t),!1;var i=n.indexOf("@"),o=n.lastIndexOf(".");return 1>i||i+2>o||o+2>=n.length?(e.showError(e.emailInput,gettext("Please enter a valid email address."),t),!1):(e.hideError(e.emailInput),!0)},password:function(e,t){var n=e.passwordDiv.find(".new-password-input, .confirm-new-password-input");return o.has(e.context,"password")&&e.context.password?e.context.password.length<8?(e.showError(n,gettext("The password should have at least 8 characters."),t),!1):e.context.password!=e.context.password2?(e.showError(n,gettext("Please confirm you password."),t),!1):(e.hideError(n),!0):(e.showError(n,gettext("Please enter your new password."),t),!1)},roomName:function(e,t){var n=e.context.roomName;return n?n.indexOf(" ")>=0?(e.showError(e.roomNameInput,gettext("Please make sure there are no spaces in the room name."),t),!1):n.length>32?(e.showError(e.roomNameInput,gettext("Your room code must be less than 32 characters."),t),!1):/^[a-z0-9]+$/i.test(n)?(e.hideError(e.roomNameInput),!0):(e.showError(e.roomNameInput,gettext("Your room code should contain only alphanumeric characters."),t),!1):(e.showError(e.roomNameInput,gettext("Please enter a room name."),t),!1)},country:function(e,t){return e.context.country?(e.hideError(e.countryDiv.find("#country")),!0):(e.showError(e.countryDiv.find("#country"),gettext("Please select your country."),t),!1)},state:function(e,t){return e.context.state?(e.hideError(e.stateInput),!0):(e.showError(e.stateInput,gettext("Please select your state."),t),!1)},zip_code:function(e,t){return e.context.zip_code&&5==e.context.zip_code.length?(e.hideError(e.zipCode),!0):(e.showError(e.zipCode,gettext("Please enter a valid school zip code."),t),!1)},school_select:function(e,t){return e.context.school_id?(e.hideError(e.schoolSelect),!0):(e.showError(e.schoolSelect,gettext("Please select your school."),t),!1)},school_name:function(e,t){return e.context.school_name?(e.hideError(e.schoolManualInput),!0):(e.showError(e.schoolManualInput,gettext("Please enter your school's name."),t),!1)},int_school_name:function(e,n){var i=t("#int-school-name");return e.context.school_name?(e.hideError(i),!0):(e.showError(i,gettext("Please enter your school's name."),n),!1)},organization_type:function(e,t){return e.context.organization_type?(e.hideError(e.organizationType),!0):(e.showError(e.organizationType,gettext("Please select your organization type."),t),!1)},ushe_name:function(e,t){return e.context.university?(e.hideError(e.usheNameDiv.find("input")),!0):(e.showError(e.usheNameDiv.find("input"),gettext("Please enter your organization's name."),t),!1)},organization_name:function(e,t){var n=e.context.organization_type;return"USHE"==n?value=e.context.university:"K12"==n?value=e.context.school_name:o.contains(["CORP","OTHR"],n)&&(value=e.context.description),value&&0!==value.length?(e.hideError(e.organizationName),!0):(e.showError(e.organizationName,gettext("Please enter your organization's name."),t),!1)}},onDestroy:function(){this.organizationType=null,this.firstName=null,this.lastName=null,this.emailInput=null,this.roomNameInput=null,this.passwordDiv=null,this.countryDiv=null,this.languageOptions=null,this.zipCode=null,this.stateInput=null,this.schoolSelect=null,this.schoolManualInput=null,this.organizationName=null,this.usheNameDiv=null,this.roleDiv=null}}),w={};return w.view=new y,a.route("teacher-profile","teacher-profile"),a.on("route:teacher-profile",function(){s.showView(w.view)}),w}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(3),i=n(1),o=n(8),r=n(2),s=n(15),a=n(11),u=n(12),c=n(5),l=n(14),d=n(55),p=n(17),h=n(56),f=(n(10),n(32),n(13)),g=n(87),m=n(88),v=n(89),A=(new d({localActivity:u}),i.View.extend({el:"#main-content",template:null,hideStudentResponses:!1,onRoutedTo:function(){var e=this;this.finished=!1,this.drilledDownToQuestion=null,u.refresh(function(){u.has("activity_type")?u.getCurrentQuiz(function(){e.questionDisplayDrilldown=new g({localActivity:u}),e.questionDisplayDrilldown.el="#lr-question-display-container",e.questionDisplayDrilldown.mainView=e,e.questionResultsDrilldown=new m({showHowDidWeDoRow:!0,localActivity:u}),e.questionResultsDrilldown.el="#lr-question-results-container",e.questionResultsDrilldown.mainView=e,e.studentPacedResults=new v({isLiveResults:!0,localActivity:u,mainView:e}),p.controller.showView(e)}):s.router.navigate("dashboard",!0)})},onDestroy:function(){this.questionDisplayDrilldown&&this.questionDisplayDrilldown.onDestroy(),this.questionResultsDrilldown&&this.questionResultsDrilldown.onDestroy(),this.studentPacedResults&&this.studentPacedResults.onDestroy(),t("#previous-button").off("click"),t("#next-button").off("click"),t("#back-to-live-results-button").off("click"),t("#multiple-choice-button").off("click"),t("#true-false-button").off("click"),t("#free-response-button").off("click"),this.hideStudentResponses=!1},loadTemplate:function(){return null===this.template&&(this.template=t("#main-template").html()),this.template},render:function(){var e=this,n=u.get("quiz").get("name");"1Q"===u.get("activity_type")&&(n=gettext("Quick Question")),"Exit Ticket Quiz"===u.get("quiz").get("name")&&(n=gettext("Exit Ticket Quiz")),s.templates.render("/live-results/main",t("#main-content"),function(){a.resetAll({hideMenu:!0,menuReplacement:"finish",menuReplacementCallback:function(){function t(){e.showReportPopup(function(t,n){t=t||"dashboard",e.finishActivity(function(){s.router.navigate(t,!0),r.isFunction(n)&&n()})})}(r.isUndefined(u.get("quiz"))||r.isUndefined(u.get("quiz").questions))&&location.reload(!0);var n=u.get("quiz").questions[0];if("QZ"===u.get("activity_type")||"FR"===n.get("type"))return void t();if("1Q"===u.get("activity_type")&&"MC"===n.get("type")){var i=r.countBy(n.answers,function(e){return""===e.get("text")});if("undefined"!=typeof i["false"])return void t()}e.finishActivity(function(){s.router.navigate("dashboard",!0)})}}),e.trigger("Render::Main");var i=u.getSettings();if(i.activity_type=u.get("activity_type"),i.drilledDownToQuestion=e.drilledDownToQuestion,null!==e.drilledDownToQuestion)i.explanation=u.get("quiz").questions[e.drilledDownToQuestion-1].get("explanation");else{var o;o=e.questionIndex?e.questionIndex:-1===u.get("activity_state")?u.get("activity_state")+1:u.get("activity_state"),"1Q"!==u.get("activity_type")&&(i.explanation=u.get("quiz").questions[o].get("explanation"))}i.title=n;var c=r.template(e.loadTemplate());t("#live-results-main-content").html(c(i)),("teacher"===i.pacing||null!==e.drilledDownToQuestion)&&(t("#previous-button").click(function(){null===e.drilledDownToQuestion?e.goToQuestion(u.get("activity_state")-1):e.drilledDownToQuestion-=1,e.render()}),t("#next-button").click(function(){null===e.drilledDownToQuestion?-1===u.get("activity_state")?e.goToQuestion(1):e.goToQuestion(u.get("activity_state")+1):e.drilledDownToQuestion+=1,e.render()}),t("#back-to-live-results-button").click(function(){e.drilledDownToQuestion=null,e.render()})),"1Q"===u.get("activity_type")&&e.setupQuickQuestionButtons(),e.renderChildren(i),e.updateButtonVisibility()})},updateButtonVisibility:function(){if(u.has("quiz")){var e=!1,n=!1,i=u.get("quiz").questions.length,o=-1;null!==this.drilledDownToQuestion?o=this.drilledDownToQuestion-1:u.get("activity_state")>0&&(o=u.get("activity_state")),1>o&&i>1?e=!0:o===i-1&&i>1?n=!0:(e=!1,n=!1),1===i&&(e=!0,n=!0),e?(t("#previous-button").hide(),t("#next-button, #back-to-live-results-button").addClass("first-btn")):(t("#previous-button").show(),t("#next-button, #back-to-live-results-button").removeClass("first-btn")),n?t("#next-button").hide():t("#next-button").show()}},setupQuickQuestionButtons:function(){var e=this,n=function(t){analytics.track("Action:AnotherQuickQuestion",{type:t}),"fr"===t.toLowerCase()?s.router.navigate("short-answer",!0):u.startQuickQuestion({type:t,disable_names:!0,callback:function(){e.onRoutedTo()}})},i=function(e){if("1Q"===u.get("activity_type"))n(e);else{var i=new f;i.render({message:gettext("Start another Quick Question?"),ok:function(){n(e)},cancel:function(){t("#multiple-choice-button, #true-false-button").removeClass("disabled")}})}};t("#multiple-choice-button").click(function(){i("mc")}),t("#true-false-button").click(function(){i("tf")}),t("#free-response-button").click(function(){i("fr")})},renderChildren:function(e){"student"===e.pacing&&null===this.drilledDownToQuestion?this.studentPacedResults.render({isLiveResults:!0}):(this.questionDisplayDrilldown.render(),this.questionResultsDrilldown.render({showHowDidWeDoRow:!0}))},showReportPopup:function(e){var t="1Q"!==u.get("activity_type");new h({aid:u.get("id"),qid:u.get("quiz").id,downloadChartReport:!1,allowViewLater:!0,allowViewChart:t,allowPdfReports:t,callback:e})},stopChildrenListeners:function(){this.stopListening(),this.finished=!0,this.questionDisplayDrilldown&&(this.questionDisplayDrilldown.stopListening().off(),this.questionDisplayDrilldown=null),this.questionResultsDrilldown&&(this.questionResultsDrilldown.stopListening().off(),this.questionResultsDrilldown=null)},finishActivity:function(e){this.stopChildrenListeners(),u.setCompleted(function(){r.isFunction(e)&&e()})},goToQuestion:function(e){var t=u.get("quiz").questions;this.questionIndex=e.clamp(0,t.length-1),o({url:window.backend_host+"/rooms/api/update-activity-instance-state/",type:"POST",data:{user_uuid:c.get("auth_token"),room_name:l.get("name"),state_data:this.questionIndex},success:function(e,t,n){},error:function(e,t,n){console.error(e),console.error(t),console.error(n)}})}})),y={};return y.view=new A,s.router.route("live-results","live-results",function(){s.requireLoggedIn("teacher")&&y.view.onRoutedTo()}),y}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,,,,function(e,t,n){var i;i=function(e){var t=n(1),i=n(8),o=t.Model.extend({getReport:function(e){i({url:window.backend_host+"/quizzes/report/"+e+"/",dataType:"json",type:"GET",success:function(e,t,n){console.log("hit success")},error:function(e,t,n){console.error("Error in /quizzes/by-user/"),console.error(e),console.error(t),console.error(n)}})}}),o=new o;return o}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,,,,,,,,,function(e,t,n){var i;i=function(e){var t=n(7),i=t.createClass({displayName:"AddQuestionView",propTypes:{addMCquestion:t.PropTypes.func.isRequired,addTFquestion:t.PropTypes.func.isRequired,addFRquestion:t.PropTypes.func.isRequired},addMCquestion:function(){this.props.addMCquestion()},addTFquestion:function(){this.props.addTFquestion()},addFRquestion:function(){this.props.addFRquestion()},render:function(){return t.DOM.div({children:[t.DOM.h4({id:"add-quiz-objects-title",children:gettext("ADD QUESTION:")}),t.DOM.div({id:"add-question-container",children:[t.DOM.button({id:"add-mc-question-button",className:"button",children:gettext("MULTIPLE CHOICE"),onClick:this.addMCquestion}),t.DOM.button({id:"add-tf-question-button",className:"button",children:gettext("TRUE / FALSE"),onClick:this.addTFquestion}),t.DOM.button({id:"add-fr-question-button",className:"button",children:gettext("SHORT ANSWER"),onClick:this.addFRquestion})]})]})}});return i}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(20),o=n(167),r=n(168),s=n(170),a=n(166),u=n(72),c=n(13),l=n(160),d=n(7),p=d.createClass({displayName:"CreateQuizView",propTypes:{quiz:d.PropTypes.instanceOf(i).isRequired,scrollToQuestion:d.PropTypes.func.isRequired},getInitialState:function(){var e=this.props.quiz;return e.questions.forEach(function(t,n){t.has("quiz_id")||t.set("quiz_id",e.get("id"))}),{questions:e.questions,newQuestion:!1}},validateQuizAndAddQuestion:function(e){var n=this,i=!0;t.each(this.props.quiz.questions,function(e){i!==!0||u(e)||(n.props.scrollToQuestion(e),i=!1)}),i===!0?this.props.quiz.addNewQuestion(e,function(){n.setState({questions:n.props.quiz.questions,newQuestion:!0})}):this.setState({questions:this.props.quiz.questions})},addMCquestion:function(){this.validateQuizAndAddQuestion("mc")},addTFquestion:function(){this.validateQuizAndAddQuestion("tf")},addFRquestion:function(){this.validateQuizAndAddQuestion("fr")},changeQuestionOrder:function(e,t){1>t||t>this.props.quiz.questions.length||(this.props.quiz.questions[e-1].set({order:t,dirty:!1}),this.props.quiz.questions[t-1].set({order:e,dirty:!1}),this.props.quiz.sortQuestions(),this.setState({questions:this.props.quiz.questions,newQuestion:!1}),this.props.scrollToQuestion(this.props.quiz.questions[e-1],1e3))},deleteQuestion:function(e){var t=this,n=new c;n.render({message:gettext("Are you sure you want to delete the question?"),okBtn:gettext("Delete"),ok:function(){t.props.quiz.removeQuestion(e),t.setState({questions:t.props.quiz.questions,newQuestion:!1}),t.props.quiz.questions.length>0&&e.get("order")-2>=0&&t.props.scrollToQuestion(t.props.quiz.questions[e.get("order")-2],1e3)}})},duplicateQuestion:function(e){var t=this;this.props.quiz.cloneQuestion(e),this.setState({questions:this.props.quiz.questions,newQuestion:!0}),setTimeout(function(){t.props.scrollToQuestion(t.props.quiz.questions[e.get("order")],1e3)},100)},questionEditCallback:function(){var e=this,n=!0;return t.forEach(this.props.quiz.questions,function(t){n!==!0||u(t)||(e.props.scrollToQuestion(t),n=!1)}),n===!1&&this.setState({questions:this.props.quiz.questions}),n},render:function(){return d.DOM.div({className:"main-dark-module",children:[d.DOM.h2({className:"title",children:this.props.title}),o({quiz:this.props.quiz}),r({quiz:this.props.quiz}),d.DOM.div({style:{clear:"both"}}),s({quiz:this.props.quiz}),a({questions:this.state.questions,changeQuestionOrder:this.changeQuestionOrder,deleteQuestion:this.deleteQuestion,duplicateQuestion:this.duplicateQuestion,questionEditCallback:this.questionEditCallback,newQuestion:this.state.newQuestion}),l({addMCquestion:this.addMCquestion,addTFquestion:this.addTFquestion,addFRquestion:this.addFRquestion})]})}});return p}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(28),o=n(7),r=o.createClass({displayName:"FRAnswerInput",propTypes:{frAnswer:o.PropTypes.string,frAnswerOnChange:o.PropTypes.func.isRequired,questionState:o.PropTypes.string.isRequired},getInitialState:function(){return{value:t.unescape(this.props.frAnswer)}},handleChange:function(e){this.setState({value:e.target.value}),this.props.frAnswerOnChange(t.escape(e.target.value))},componentDidMount:function(e){""===this.state.value&&this.getDOMNode().focus()},render:function(){return o.DOM.input({type:"text",className:"textfield text-entry-toggle-textbox",value:this.state.value,maxLength:"255",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",disabled:"displayContainer"===this.props.questionState,onChange:this.handleChange})}}),s=o.createClass({displayName:"FRAnswer",propTypes:{answer:o.PropTypes.instanceOf(i).isRequired,questionState:o.PropTypes.string.isRequired,setQuestionToDirty:o.PropTypes.func.isRequired},frAnswerOnChange:function(e){var t=this.props.answer;e!==t.get("text")&&(t.set({text:e,is_correct:!0}),this.props.setQuestionToDirty())},render:function(){var e=this.props.answer;return o.DOM.div({id:"fr-answer-"+e.get("order"),className:"answer",children:o.DOM.div({className:"text-entry-toggle",children:o.DOM.div({className:"text-entry-toggle-textbox-container",children:r({frAnswer:e.get("text"),frAnswerOnChange:this.frAnswerOnChange,questionState:this.props.questionState})})})})}});return s}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(23),o=n(68),r=n(66),s=n(162),a=n(65),u=n(69),c=n(70),l=n(67),d=n(7),p=d.createClass({propTypes:{question:d.PropTypes.instanceOf(i).isRequired,changeQuestionOrder:d.PropTypes.func.isRequired,deleteQuestion:d.PropTypes.func.isRequired,duplicateQuestion:d.PropTypes.func.isRequired},mixins:[l],getInitialState:function(){return{answers:this.props.question.answers,savingIndicator:"incomplete",questionState:this.getNewQuestionState()}},removeQuestionAnswer:function(){this.props.question.removeAnswer(),this.setState({answers:this.props.question.answers})},render:function(){var e=this.props.question,n=this,i=[];return t.each(e.answers,function(e){i.push(s({answer:e,questionState:n.state.questionState,setQuestionToDirty:n.setQuestionToDirty}))}),d.DOM.div({id:"question-"+e.get("order"),className:"displayContainer"===this.state.questionState?"question edit-free-response-question":"question edit-free-response-question edit-mode",children:[d.DOM.div({className:"edit-question-number clearfix",children:[d.DOM.span({className:"question-number short-answer-question",children:"#"+e.get("order")}),r({inputId:"format-toggle-question-"+e.get("order"),questionState:this.state.questionState,editQuestionCallback:this.editQuestionCallback,formatToggleCallback:this.formatToggleCallback,questionHasContent:this.questionHasTags()})]}),d.DOM.div({className:"clearfix",children:[u({question:e,questionState:this.state.questionState}),o({questionTextContent:e.get("question_text"),questionTextCallback:this.questionTextCallback,questionTextState:this.state.questionState})]}),d.DOM.div({className:"edit-question-answers",children:d.DOM.div({className:"free-response-menu",children:[d.DOM.div({style:{display:"displayContainer"===this.state.questionState?"none":"block"},className:"menu-header",children:d.DOM.span({children:gettext("Correct Answers (Optional)")})}),d.DOM.form({className:"fr-answers-container form",children:i}),d.DOM.div({style:{display:"displayContainer"===this.state.questionState?"none":"block"},children:[d.DOM.button({className:"add-choice-button button button-small",children:"+"+gettext("Add"),tabIndex:-1,onClick:this.addQuestionAnswer}),d.DOM.button({className:"remove-choice-button button button-small",children:"-"+gettext("Delete"),tabIndex:-1,onClick:this.removeQuestionAnswer})]})]})}),a({questionExplanationContent:e.get("explanation"),questionExplanationCallback:this.questionExplanationCallback,questionState:this.state.questionState}),c({order:e.get("order"),changeQuestionOrder:this.props.changeQuestionOrder,deleteQuestion:this.deleteQuestionCallback,duplicateQuestion:this.duplicateQuestionCallback,hideButtons:this.props.questionInEditMode||"displayContainer"!==this.state.questionState})]})}});return p}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(28),i=n(71),o=n(7),r=o.createClass({displayName:"MCAnswerTextEntryRightSide",propTypes:{checked:o.PropTypes.bool.isRequired,answerSelectCorrect:o.PropTypes.func.isRequired,questionState:o.PropTypes.string.isRequired,deletedAnswer:o.PropTypes.number.isRequired,deleteAnswerCallback:o.PropTypes.func.isRequired},getInitialState:function(){return{value:!!this.props.checked||!1}},componentWillReceiveProps:function(e){this.setState({value:e.checked})},deleteAnswer:function(){this.props.deleteAnswerCallback(this.props.deletedAnswer)},handleChange:function(e){this.setState({value:e.target.checked}),this.props.answerSelectCorrect(e)},render:function(){return o.DOM.div({className:"mc-answer-right-side",style:{},children:[o.DOM.div({className:"edit-mc-answer-correctness",children:o.DOM.input({className:"mc-correct-checkbox",type:"checkbox",onChange:this.handleChange,tabIndex:-1,checked:this.state.value})}),o.DOM.span({className:"delete-option-answer",onClick:this.deleteAnswer,children:o.DOM.i({"data-icon":"h"})})]})}}),s=o.createClass({displayName:"MCAnswer",propTypes:{answer:o.PropTypes.instanceOf(t).isRequired,deleteAnswerCallback:o.PropTypes.func.isRequired,questionState:o.PropTypes.string.isRequired,setQuestionToDirty:o.PropTypes.func.isRequired},getInitialState:function(){return{questionState:this.props.questionState}},componentWillReceiveProps:function(e){this.setState({questionState:"editContainer"})},answerOnChange:function(e){this.props.answer.set({text:e}),this.props.setQuestionToDirty()},answerSelectCorrect:function(e){this.props.answer.set({is_correct:e.target.checked}),this.setState({is_correct:e.target.checked}),this.props.setQuestionToDirty()},convertToNumbering:function(e){if(e>26){var t="A".charCodeAt(0),n="";do e-=1,n=String.fromCharCode(t+e%26)+n,e=e/26>>0;while(e>0)}else var n=String.fromCharCode("A".charCodeAt(0)+e-1);return n},render:function(){var e=this.props.answer,t=null;return"displayContainer"!==this.props.questionState&&(t=r({checked:this.props.answer.get("is_correct"),answerSelectCorrect:this.answerSelectCorrect,questionState:this.props.questionState,deletedAnswer:this.props.answer.get("order"),deleteAnswerCallback:this.props.deleteAnswerCallback})),o.DOM.div({id:"mc-answer-"+e.get("order"),className:this.props.answer.get("is_correct")===!0?"mc-answer is-correct":"mc-answer",children:[o.DOM.span({className:"edit-question-number",children:this.convertToNumbering(e.get("order"))}),i({questionTextContent:this.props.answer.get("text"),questionTextOnChange:this.answerOnChange,questionState:this.props.questionState}),t]})}});return s}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(28),o=n(23),r=n(5),s=n(68),a=n(66),u=n(164),c=n(65),l=n(69),d=n(70),p=n(67),h=n(10),f=n(7),g=f.createClass({displayName:"McQuestion",propTypes:{question:f.PropTypes.instanceOf(o).isRequired,changeQuestionOrder:f.PropTypes.func.isRequired,deleteQuestion:f.PropTypes.func.isRequired,duplicateQuestion:f.PropTypes.func.isRequired,questionInEditCallback:f.PropTypes.func.isRequired,questionInEditMode:f.PropTypes.bool.isRequired},mixins:[p],getInitialState:function(){var e=this.props.question;if(0===e.answers.length)for(var n=0;5>n;++n){var o=new i({text:"",is_correct:!1,order:n+1,auth_token:r.get("auth_token")});e.addAnswer(o)}return e.answers=t.sortBy(e.answers,function(e){return e.get("order")}),{answers:e.answers,savingIndicator:"incomplete",questionState:this.getNewQuestionState()}},deleteAnswerCallback:function(e){var n=this.props.question;if(n.answers.length<=2){var i=new h;i.render({message:"A Multiple Choice question must have at least 2 answer choices."})}else{var o=t.filter(n.answers,function(t){return t.get("order")===e});this.props.question.removeAnswer(o[0]),this.props.question.answers.forEach(function(e,t){e.set("order",t+1)}),this.setState({answers:n.answers})}},render:function(){var e=this.props.question,n=this,i=[];return t.each(this.state.answers,function(e){i.push(u({answer:e,deleteAnswerCallback:n.deleteAnswerCallback,questionState:n.state.questionState,setQuestionToDirty:n.setQuestionToDirty}))}),f.DOM.div({id:"question-"+e.get("order"),className:"displayContainer"===this.state.questionState?"question edit-multiple-choice-question":"question edit-multiple-choice-question edit-mode",children:[f.DOM.div({className:"edit-question-number clearfix",children:[f.DOM.span({className:"question-number multiple-choice-question",children:"#"+e.get("order")}),a({inputId:"format-toggle-question-"+e.get("order"),questionState:this.state.questionState,editQuestionCallback:this.editQuestionCallback,formatToggleCallback:this.formatToggleCallback,questionHasContent:this.questionHasTags()})]}),f.DOM.div({className:"clearfix",children:[l({question:e,questionState:this.state.questionState}),s({questionTextContent:e.get("question_text"),questionTextCallback:this.questionTextCallback,questionTextState:this.state.questionState})]}),f.DOM.div({className:"edit-question-answers",children:f.DOM.div({className:"multiple-choice-menu",children:[f.DOM.div({className:"clearfix",children:[f.DOM.div({className:"multiple-choice-header align-left",children:gettext("Answer Choice")}),f.DOM.div({className:"multiple-choice-header align-right",style:{display:"displayContainer"===this.state.questionState?"none":"block"},children:gettext("Correct?")})]}),f.DOM.div({className:"mc-choice-container clearfix",children:i}),f.DOM.span({className:"add-choice",style:{display:"displayContainer"===this.state.questionState?"none":"inline-block"},children:[f.DOM.span({className:"add-choice-icon",children:"+ "+gettext("ADD ANSWER")})],onClick:this.addQuestionAnswer})]})}),c({questionExplanationContent:e.get("explanation"),questionExplanationCallback:this.questionExplanationCallback,questionState:this.state.questionState}),d({order:e.get("order"),changeQuestionOrder:this.props.changeQuestionOrder,deleteQuestion:this.deleteQuestionCallback,duplicateQuestion:this.duplicateQuestionCallback,hideButtons:this.props.questionInEditMode||"displayContainer"!==this.state.questionState})]})}});return g}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(23),i=n(165),o=n(172),r=n(163),s=n(7),a=s.createClass({propTypes:{questions:s.PropTypes.arrayOf(s.PropTypes.instanceOf(t)).isRequired,changeQuestionOrder:s.PropTypes.func.isRequired,deleteQuestion:s.PropTypes.func.isRequired,duplicateQuestion:s.PropTypes.func.isRequired,questionEditCallback:s.PropTypes.func.isRequired,newQuestion:s.PropTypes.bool.isRequired},getInitialState:function(){return{questionInEditMode:!1}},componentWillReceiveProps:function(e){e.newQuestion===!1&&this.setState({questionInEditMode:!1})},questionInEdit:function(e){this.props.newQuestion=!1,this.setState({questionInEditMode:e})},render:function(){var e=this.props.questions,t=this,n=[];return e.forEach(function(e,a){var u=a+1;e.set("question_number",u);var c={question:e,changeQuestionOrder:t.props.changeQuestionOrder,deleteQuestion:t.props.deleteQuestion,duplicateQuestion:t.props.duplicateQuestion,questionEditCallback:t.props.questionEditCallback,questionInEditCallback:t.questionInEdit,questionInEditMode:!!t.props.newQuestion||t.state.questionInEditMode},l=e.get("type").toUpperCase();if("MC"==l)var d=i(c);else if("TF"==l)var d=o(c);else{if("FR"!=l)return void console.error("Unexpected question.type: "+l);var d=r(c)}n.push(s.DOM.div({id:"question"+u,children:d}))}),s.DOM.div({id:"questions",children:n})}});return a}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(20),i=n(7),o=i.createClass({propTypes:{quizNameOnBlur:i.PropTypes.func.isRequired,quizName:i.PropTypes.string.isRequired},getInitialState:function(){return{value:this.props.quizName}},componentWillReceiveProps:function(e){this.setState({value:e.quizName})},handleChange:function(e){this.setState({value:e.target.value}),this.props.quizNameOnBlur(e.target.value)},render:function(){var e="textfield text-entry-toggle-textbox";return this.state.value&&this.state.value!==gettext("Untitled quiz")||(e+=" form-danger"),i.DOM.input({id:"quizname-textbox",type:"text",className:e,value:this.state.value,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",placeholder:gettext("Name Your Quiz..."),maxLength:"255",autoFocus:!0,onChange:this.handleChange})}}),r=i.createClass({propTypes:{quizNameOnBlur:i.PropTypes.func.isRequired,quizName:i.PropTypes.string.isRequired},render:function(){return i.DOM.div({id:"quizname-setup-container",className:"text-entry-toggle-textbox-container form",children:[o({quizNameOnBlur:this.props.quizNameOnBlur,quizName:this.props.quizName})]})}}),s=i.createClass({propTypes:{quiz:i.PropTypes.instanceOf(t).isRequired},quizNameOnBlur:function(e){e!==this.props.quiz.get("name")&&this.props.quiz.set({name:e,dirty:!0})},render:function(){return i.DOM.div({id:"quizname-setup-widget",className:"text-entry-toggle",children:r({quizNameOnBlur:this.quizNameOnBlur,quizName:this.props.quiz.get("name")})})}}),a=i.createClass({propTypes:{quiz:i.PropTypes.instanceOf(t).isRequired},render:function(){return i.DOM.div({id:"create-quiz-top-row",children:s({quiz:this.props.quiz})})}});return a}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(20),i=n(7),o=i.createClass({propTypes:{sharable:i.PropTypes.bool.isRequired,socNumber:i.PropTypes.string.isRequired},render:function(){return i.DOM.div({id:"soc-container",style:{opacity:this.props.sharable===!0?1:.5},children:[i.DOM.h4({id:"soc-number-label",children:[gettext("Share Quiz")+": ",i.DOM.span({id:"soc-number"},"SOC-"+this.props.socNumber)]})]})}}),r=i.createClass({displayName:"ShareContainerView",propTypes:{quiz:i.PropTypes.instanceOf(t).isRequired},getInitialState:function(){return{sharable:this.props.quiz.get("sharable")}},shareButtomClicked:function(){this.props.quiz.set({sharable:!this.state.sharable,dirty:!0}),this.setState({sharable:!this.state.sharable})},render:function(){return i.DOM.div({id:"share-container",className:"clearfix",children:[i.DOM.div({className:"toggle-slider align-left",id:"share-button",children:[i.DOM.input({type:"checkbox",id:"share-quiz",className:"toggle-slider-checkbox",checked:this.state.sharable===!0?"true":"",onChange:this.shareButtomClicked}),i.DOM.label({className:"toggle-slider-label",htmlFor:"share-quiz",children:[i.DOM.div({className:"toggle-slider-inner"}),i.DOM.div({className:"toggle-slider-switch"})]})]}),o({sharable:this.state.sharable,socNumber:this.props.quiz.get("soc_number")})]})}});return r}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(7),o=i.createClass({displayName:"TagElement",propTypes:{tag:i.PropTypes.object.isRequired,nextTagCallback:i.PropTypes.func.isRequired,addTagCallback:i.PropTypes.func,removeTagCallback:i.PropTypes.func,quizTagsIds:i.PropTypes.array},getInitialState:function(){return{tagDescriptionDisplay:"none"}},componentWillReceiveProps:function(e){this.setState({tagDescriptionDisplay:"none"})},nextTagCallback:function(){this.props.nextTagCallback(this.props.tag.id)},addTagCallback:function(e){e.target.checked===!0?this.props.addTagCallback(this.props.tag.id):e.target.checked===!1&&this.props.removeTagCallback(this.props.tag.id)},tagElementClickCallback:function(){"none"===this.state.tagDescriptionDisplay?this.setState({tagDescriptionDisplay:"block"}):this.setState({tagDescriptionDisplay:"none"})},render:function(){var e=this.props.tag;if(e.leaf===!0)var t="tag-headline-leaf",n=i.DOM.div({className:"tag-action",children:i.DOM.input({type:"checkbox",checked:-1===this.props.quizTagsIds.indexOf(this.props.tag.id)?!1:!0,onChange:this.addTagCallback})});else{if(e.leaf!==!1)throw"tag leaf is not true or false:"+e.leaf;var t="",n=i.DOM.div({className:"tag-action",children:i.DOM.span({className:"next",dangerouslySetInnerHTML:{__html:"&#8594;"}}),onClick:this.nextTagCallback})}return i.DOM.div({children:[i.DOM.div({className:"tag-element",children:[i.DOM.div({className:"tag-text",children:i.DOM.span({className:"tag-verbose-name "+t,children:e.verbose_name,
onClick:this.tagElementClickCallback})}),n]}),i.DOM.div({className:"tag-description-panel",children:i.DOM.div({className:"tag-description",style:{display:this.state.tagDescriptionDisplay},children:[i.DOM.span({children:e.description}),i.DOM.span({children:i.DOM.a({href:e.url,target:"_blank",children:gettext("Go to")+" Corestandards.org"})})]})})]})}}),r=i.createClass({displayName:"BreadCrumb",propTypes:{breadcrumb:i.PropTypes.object.isRequired,nextTagCallback:i.PropTypes.func.isRequired},nextTagCallback:function(){this.props.nextTagCallback(this.props.breadcrumb.id)},render:function(){var e=0===this.props.breadcrumb.id?"CCSS":this.props.breadcrumb.verbose_name;return i.DOM.li({children:i.DOM.span({children:e}),onClick:this.nextTagCallback})}}),s=i.createClass({displayName:"BreadCrumbList",propTypes:{tagHistory:i.PropTypes.array.isRequired,nextTagCallback:i.PropTypes.func.isRequired},render:function(){var e=[],t=this.props.nextTagCallback;return this.props.tagHistory.forEach(function(n){e.push(r({breadcrumb:n,nextTagCallback:t}))}),i.DOM.ol({className:"breadcrumb",children:e})}}),a=i.createClass({displayName:"TagsMenu",propTypes:{tags:i.PropTypes.arrayOf(i.PropTypes.object).isRequired,quizTags:i.PropTypes.arrayOf(i.PropTypes.object).isRequired,tagMenuDisplay:i.PropTypes.string.isRequired,addTagCallback:i.PropTypes.func.isRequired,removeTagCallback:i.PropTypes.func.isRequired,openTagMenuCallback:i.PropTypes.func.isRequired,nextTagCallback:i.PropTypes.func.isRequired,currentTagID:i.PropTypes.number.isRequired,tagHistory:i.PropTypes.arrayOf(i.PropTypes.object).isRequired},render:function(){var e=this,n=this.props.tags,r=[],a=t.map(this.props.quizTags,function(e){return e.id});if(0===e.props.currentTagID&&n.length>0)r.push(o({tag:n[0],addTagCallback:e.props.addTagCallback,nextTagCallback:e.props.nextTagCallback,quizTagsIds:a}));else{var u=t.filter(n,function(t){return t.parent[0]===e.props.currentTagID});u=t.sortBy(u,function(e){return e.id}),u.forEach(function(t){r.push(o({tag:t,addTagCallback:e.props.addTagCallback,removeTagCallback:e.props.removeTagCallback,nextTagCallback:e.props.nextTagCallback,quizTagsIds:a}))})}return i.DOM.div({id:"tag-menu",className:"tag-menu",style:{display:this.props.tagMenuDisplay},children:[i.DOM.div({className:"delete-button-container",children:i.DOM.button({id:"close-tag-menu",className:"delete-button",children:[i.DOM.i({"data-icon":"h"})],onClick:this.props.openTagMenuCallback})}),i.DOM.div({className:"tag-menu-header",children:s({tagHistory:this.props.tagHistory,nextTagCallback:this.props.nextTagCallback})}),i.DOM.div({className:"tag-menu-content",children:r})]})}});return a}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(135),o=n(20),r=n(169),s=n(7),a=s.createClass({displayName:"TagDescription",propTypes:{tag:s.PropTypes.object,tagDescriptionStyleDisplay:s.PropTypes.string.isRequired,removeTagCallback:s.PropTypes.func.isRequired},removeTagClick:function(){this.props.removeTagCallback(this.props.tag.id)},render:function(){if(null===this.props.tag)var e="",t="";else var e=this.props.tag.name,t=this.props.tag.description;return s.DOM.div({className:"detail-tag",style:{display:this.props.tagDescriptionStyleDisplay},children:[s.DOM.span({className:"tag-selected",children:e}),s.DOM.span({className:"tag-selected-desc",children:t}),s.DOM.button({className:"remove-tag-button button button-small",children:gettext("Remove"),onClick:this.removeTagClick})]})}}),u=s.createClass({displayName:"ExistingTagButton",propTypes:{tag:s.PropTypes.object.isRequired,cssClass:s.PropTypes.string.isRequired,tagClickCallback:s.PropTypes.func.isRequired},tagClick:function(){""===this.props.cssClass?this.props.tagClickCallback(this.props.tag):this.props.tagClickCallback(null)},render:function(){return s.DOM.button({className:"tags-button tags-button-more "+this.props.cssClass,children:s.DOM.span({children:this.props.tag.name}),onClick:this.tagClick})}}),c=s.createClass({displayName:"TagsButtons",propTypes:{tags:s.PropTypes.arrayOf(s.PropTypes.object).isRequired,removeTagCallback:s.PropTypes.func.isRequired},getInitialState:function(){return{tag:null,tagDescriptionStyleDisplay:"none"}},removeTagCallback:function(e){this.setState({tag:null,tagDescriptionStyleDisplay:"none"}),this.props.removeTagCallback(e)},tagClickCallback:function(e){null===e?this.setState({tag:null,tagDescriptionStyleDisplay:"none"}):t.isUndefined(e)?console.warn("error here"):this.setState({tag:e,tagDescriptionStyleDisplay:"block"})},render:function(){var e=this,t=[];return this.props.tags.forEach(function(n){if(n==e.state.tag)var i="selected";else var i="";t.push(u({tag:n,cssClass:i,tagClickCallback:e.tagClickCallback}))}),s.DOM.div({className:"tag-buttons",children:[s.DOM.div({className:"existing-tags",children:t}),s.DOM.div({style:{clear:"both"}}),a({tag:this.state.tag,removeTagCallback:this.removeTagCallback,tagDescriptionStyleDisplay:this.state.tagDescriptionStyleDisplay})]})}}),l=s.createClass({displayName:"TagsView",propTypes:{quiz:s.PropTypes.instanceOf(o).isRequired},getInitialState:function(){return{tagMenuDisplay:"none",quizTags:this.props.quiz.tags,addTagButtonClass:"",currentTagID:0,tagHistory:[{id:0}]}},getDefaultProps:function(){var e=[];return{taglist:e}},removeTagCallback:function(e){var n=this;n.props.quiz.tags=t.filter(n.props.quiz.tags,function(t){return t.id!==e}),n.setState({quizTags:n.props.quiz.tags}),this.props.quiz.set({dirty:!0})},addTagCallback:function(e){var t=this;t.props.quiz.tags.push(t.props.taglist[e-1]),t.setState({quizTags:t.props.quiz.tags}),this.props.quiz.set({dirty:!0})},nextTagCallback:function(e){var n=this.state.tagHistory,i=t.filter(n,function(t){return t.id===e});if(0!==i.length){var o=n.indexOf(i[0]);n.splice(o+1,n.length-o)}else n.push(this.props.taglist[e-1]);this.setState({currentTagID:e,tagHistory:n})},openTagMenuCallback:function(){var e=this;"none"===this.state.tagMenuDisplay?i.loadTags(function(t){e.props.taglist=t,e.setState({tagMenuDisplay:"block",addTagButtonClass:"tags-button-clicked"})}):this.setState({tagMenuDisplay:"none",addTagButtonClass:"",currentTagID:0,tagHistory:[{id:0}]})},render:function(){return s.DOM.div({id:"tags",children:[s.DOM.button({id:"toggle-tag-menu-button",className:"button button-link-style "+this.state.addTagButtonClass,children:"+ "+gettext("Add Tag"),onClick:this.openTagMenuCallback}),c({tags:this.state.quizTags,removeTagCallback:this.removeTagCallback}),r({tags:this.props.taglist,quizTags:this.state.quizTags,tagMenuDisplay:this.state.tagMenuDisplay,addTagCallback:this.addTagCallback,removeTagCallback:this.removeTagCallback,openTagMenuCallback:this.openTagMenuCallback,nextTagCallback:this.nextTagCallback,currentTagID:this.state.currentTagID,tagHistory:this.state.tagHistory})]})}});return l}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(28),o=n(7),r=o.createClass({displayName:"TFAnswer",propTypes:{answers:o.PropTypes.arrayOf(o.PropTypes.instanceOf(i)).isRequired,questionState:o.PropTypes.string.isRequired,setQuestionToDirty:o.PropTypes.func.isRequired},getDefaultProps:function(){var e=t.find(this.props.answers,function(e){return"True"===e.get("text")}),n=t.find(this.props.answers,function(e){return"False"===e.get("text")});return{trueAnswer:e,falseAnswer:n}},getInitialState:function(){return{trueAnswerSelected:this.props.trueAnswer.get("is_correct")===!0?"true-false-toggle-on":"",falseAnswerSelected:this.props.falseAnswer.get("is_correct")===!0?"true-false-toggle-on":""}},componentWillReceiveProps:function(e){var n=t.find(e.answers,function(e){return"True"===e.get("text")}),i=t.find(e.answers,function(e){return"False"===e.get("text")});this.setState({trueAnswerSelected:n.get("is_correct")===!0?"true-false-toggle-on":"",falseAnswerSelected:i.get("is_correct")===!0?"true-false-toggle-on":""})},trueButtonSelectedCallback:function(){"displayContainer"!==this.props.questionState&&this.props.trueAnswer.get("is_correct")!==!0&&(this.setState({trueAnswerSelected:"true-false-toggle-on",falseAnswerSelected:""}),this.saveAnswer(this.props.trueAnswer,!0),this.saveAnswer(this.props.falseAnswer,!1),this.props.setQuestionToDirty())},falseButtonSelectedCallback:function(){"displayContainer"!==this.props.questionState&&this.props.falseAnswer.get("is_correct")!==!0&&(this.setState({trueAnswerSelected:"",falseAnswerSelected:"true-false-toggle-on"}),this.saveAnswer(this.props.falseAnswer,!0),this.saveAnswer(this.props.trueAnswer,!1),this.props.setQuestionToDirty())},saveAnswer:function(e,t){e.set({is_correct:t,dirty:!0})},componentDidMount:function(){t.isUndefined(this.props.trueAnswer.get("is_correct"))&&(this.saveAnswer(this.props.trueAnswer,!0),this.saveAnswer(this.props.falseAnswer,!1),this.props.setQuestionToDirty())},render:function(){return o.DOM.div({className:"edit-question-answers-tf",children:[o.DOM.span({children:gettext("Correct Answer")+":"}),o.DOM.div({className:"true-false-toggle",children:[o.DOM.button({className:"true-toggle "+this.state.trueAnswerSelected,children:o.DOM.span({className:"true-toggle-text",children:gettext("True")}),tabIndex:-1,onClick:this.trueButtonSelectedCallback}),o.DOM.button({className:"false-toggle "+this.state.falseAnswerSelected,children:o.DOM.span({className:"false-toggle-text",children:gettext("False")}),tabIndex:-1,onClick:this.falseButtonSelectedCallback})]})]})}});return r}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=n(2),i=n(23),o=n(28),r=n(68),s=n(66),a=n(171),u=n(65),c=n(69),l=n(70),d=n(67),p=n(7),h=p.createClass({displayName:"TFQuestion",propTypes:{changeQuestionOrder:p.PropTypes.func.isRequired,deleteQuestion:p.PropTypes.func.isRequired,question:p.PropTypes.instanceOf(i).isRequired,duplicateQuestion:p.PropTypes.func.isRequired},mixins:[d],getInitialState:function(){var e=this.props.question,n=t.find(e.answers,function(e){return"True"===e.get("text")}),i=t.find(e.answers,function(e){return"False"===e.get("text")});return t.isUndefined(n)&&(n=new o({text:"True",order:1,is_correct:!0}),e.addAnswer(n)),t.isUndefined(i)&&(i=new o({text:"False",order:2,is_correct:!1}),e.addAnswer(i)),e.answers=t.sortBy(e.answers,function(e){return e.get("order")}),{answers:e.answers,savingIndicator:"incomplete",questionState:this.getNewQuestionState()}},render:function(){var e=this.props.question;return p.DOM.div({id:"question-"+e.get("order"),className:"displayContainer"===this.state.questionState?"question edit-true-false-question":"question edit-true-false-question edit-mode",children:[p.DOM.div({className:"edit-question-number clearfix",children:[p.DOM.span({className:"question-number true-false-question",children:"#"+e.get("order")}),s({inputId:"format-toggle-question-"+e.get("order"),questionState:this.state.questionState,editQuestionCallback:this.editQuestionCallback,formatToggleCallback:this.formatToggleCallback,questionHasContent:this.questionHasTags()})]}),p.DOM.div({className:"clearfix",children:[c({question:e,questionState:this.state.questionState}),r({questionTextContent:e.get("question_text"),questionTextCallback:this.questionTextCallback,questionTextState:this.state.questionState})]}),a({answers:this.state.answers,questionState:this.state.questionState,setQuestionToDirty:this.setQuestionToDirty}),u({questionExplanationContent:e.get("explanation"),questionExplanationCallback:this.questionExplanationCallback,questionState:this.state.questionState}),l({order:e.get("order"),changeQuestionOrder:this.props.changeQuestionOrder,deleteQuestion:this.deleteQuestionCallback,duplicateQuestion:this.duplicateQuestionCallback,hideButtons:this.props.questionInEditMode||"displayContainer"!==this.state.questionState})]})}});return h}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i;i=function(e){var t=function(e,t){tinymce.init({selector:e,theme:"modern",toolbar:"bold italic underline | subscript superscript",font_formats:"Arial=arial,helvetica,sans-serif;",valid_elements:"blockquote,emphasis,em,strong,b,sub,sup,br,p,u,strike,span[class=underline]",formats:{underline:{inline:"span",classes:"underline",exact:!0}},plugins:"paste",paste_as_text:!0,save_enablewhendirty:!1,menubar:!1,statusbar:!1,content_css:window.static_url+"js/tinymce/skins/lightgray/content.min.css",setup:function(e){e.on("change",function(e){t(e.level.content.trim())})}})};return t}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))},,function(e,t,n){var i,o;i=[n(3),n(2),n(1),n(17),n(9),n(11),n(150)],o=function(e,t,n,i,o,r,s){var a=n.View.extend({el:"#main-content",events:{"click #send-share-emails":function(){console.log(s),s.getReport("123"),i.navigate("manage-quizzes",!0)},"click #send-add-emails":function(){u.counter<=8&&(u.counter++,this.popupDisplay())},"click .delete-icon":function(){u.counter--;var t=e(event.target);t.parent().remove()}},render:function(){r.resetAll(),o.render("/quizzes/send-to/",this.$el)},popupDisplay:function(){o.get("/popup/",function(n){e("#email-list").append(t.template(n))}),e("#email-list").animate({scrollTop:e("#email-list")[0].scrollHeight},e("#email-list").height)}}),u={};return u.view=new a,u.counter=2,i.route("send-to","send-to"),i.on("route:send-to",function(){u.view.render()}),u}.apply(t,i),!(void 0!==o&&(e.exports=o))},,,,,function(e,t,n){function i(){r.extend(this,o.Events),this.listenTo(a,"profile:incomplete",this.onProfileIncomplete),this.listenTo(a,"quizImport:error",this.onQuizImportError),this.listenTo(a,"quizImport:success",this.onQuizImportSuccess),this.listenTo(u,"loginError:ok",this.loginErrorOk),this.listenTo(u,"dashboard:rendered",this.dashboardRendered),this.listenTo(u,"quizImport:dismissed",this.quizImportDismissed),this.listenTo(u,"profileNag:ok",this.profileNagOk),this.listenTo(u,"click:startQuiz",this.startQuizClicked),this.listenTo(u,"click:quickQuestion",this.quickQuestionClicked),this.listenTo(u,"click:spaceRace",this.spaceRaceClicked),this.listenTo(u,"click:exitTicket",this.exitTicketClicked)}var o=n(1),r=n(2),s=n(15),a=n(182),u=n(183),c=n(11),l=n(18);i.prototype.doTeacherDashboard=function(){var e=this;s.requireLoggedIn("teacher")&&(a.localRoom.has("id")&&a.localRoom.has("name")?e.showView():a.localRoom.join({roomname:"",auth_token:a.localUser.get("auth_token"),success:function(){e.showView()},error:function(){u.showLoginError()}}))},i.prototype.showView=function(){l.showView(u),c.resetAll({title:"Dashboard"})},i.prototype.onProfileIncomplete=function(){u.showProfileNag()},i.prototype.onQuizImportError=function(){u.showQuizImportError()},i.prototype.onQuizImportSuccess=function(){u.showQuizImportSuccess()},i.prototype.loginErrorOk=function(){a.localUser.clearCookieData(),this.trigger("routeTo:index")},i.prototype.dashboardRendered=function(){a.checkQuizImport(),a.localUser.get("firstTime")&&(a.localUser.unset("firstTime"),u.showWelcome())},i.prototype.quizImportDismissed=function(){a.checkProfileComplete()},i.prototype.profileNagOk=function(){this.trigger("routeTo:teacherProfile")},i.prototype.startQuizClicked=function(){this.trigger("routeTo:selectQuiz")},i.prototype.quickQuestionClicked=function(){this.trigger("routeTo:createQuestion")},i.prototype.spaceRaceClicked=function(){this.trigger("routeTo:spaceRaceControls")},i.prototype.exitTicketClicked=function(){var e=this;a.localActivity.startExitTicket({success:function(){e.trigger("routeTo:liveResults")}})},e.exports=new i},,function(e,t,n){var i=n(1),o=n(8),r=i.Model.extend({localUser:n(5),localRoom:n(14),localActivity:n(12),checkProfileComplete:function(){!this.localRoom.has("complete_user")||this.localRoom.get("complete_user")||this.localUser.get("firstTime")||(this.localRoom.unset("complete_user"),this.trigger("profile:incomplete"))},checkQuizImport:function(){var e=this;if(e.localUser.has("importQuizStatus")){var t=e.localUser.get("importQuizStatus");201==t?(e.localUser.unset("importQuizStatus"),e.trigger("quizImport:success")):-1==t?(e.localUser.has("quiz_sn")?o({url:window.backend_host+"/quizzes/api/import-quiz/{0}/{1}/".format(e.localUser.get("quiz_sn"),e.localUser.getUUID()),success:function(t){e.trigger("quizImport:success")},error:function(t,n,i){e.trigger("quizImport:error")}}):e.trigger("quizImport:error"),e.localUser.unset("importQuizStatus").unset("quiz_sn")):(e.localUser.unset("importQuizStatus"),e.trigger("quizImport:error"))}else e.checkProfileComplete()}});e.exports=new r},function(e,t,n){var i=n(1),o=n(9),r=n(7),s=n(32),a=n(13),u=n(10),c=i.View.extend({el:"#main-content",events:{"click #start-quiz":"onClickStartQuiz","click #quick-question":"onClickQuickQuestion","click #space-race-button":"onClickSpaceRace","click #exit-ticket-button":"onClickExitTicket"},onClickStartQuiz:function(){this.trigger("click:startQuiz")},onClickQuickQuestion:function(){this.trigger("click:quickQuestion")},onClickSpaceRace:function(){this.trigger("click:spaceRace")},onClickExitTicket:function(){this.trigger("click:exitTicket")},render:function(){r.unmountComponentAtNode(document.getElementById("main-content"));var e=this;o.render("/dashboard/main/",this.$el,function(){e.trigger("dashboard:rendered")})},showLoginError:function(){var e=this,t=new u;t.render({message:gettext("There was an error when trying to login!"),ok:function(){e.trigger("loginError:ok")}})},showWelcome:function(){var e=new s;e.render({message:gettext('Welcome to Socrative! <br /><br /> Check out our <a class="link" href="http://www.socrative.com/materials/SocrativeUserGuide" target=_blank>User Guide</a> <br />to find out all the cool things you can do.')})},showProfileNag:function(){var e=this,t=new a;t.render({message:gettext('Hi! <img width="17px" src="'+window.static_url+'img/smile2.png" alt=":)"> <br>Please complete your Teacher profile'),ok:function(){e.trigger("profileNag:ok")},okBtn:gettext("Okay!"),cancelBtn:gettext("Not now")})},showQuizImportError:function(){var e=this,t=new u;t.render({message:gettext("An error has occurred while adding a new quiz to your account!"),ok:function(){e.trigger("quizImport:dismissed")}})},showQuizImportSuccess:function(){var e=this,t=new s;t.render({message:gettext("A new quiz has been added to your account"),ok:function(){e.trigger("quizImport:dismissed")}})}});e.exports=new c},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,o,r;/*!
		Autosize 3.0.8
		license: MIT
		http://www.jacklmoore.com/autosize
	*/
!function(n,s){o=[t,e],i=s,r="function"==typeof i?i.apply(t,o):i,!(void 0!==r&&(e.exports=r))}(this,function(e,t){"use strict";function n(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),l="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),o()}function n(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,d=t,c&&(e.style.overflowY=t),i()}function i(){var t=window.pageYOffset,n=document.body.scrollTop,i=e.style.height;e.style.height="auto";var o=e.scrollHeight+l;return 0===e.scrollHeight?void(e.style.height=i):(e.style.height=o+"px",document.documentElement.scrollTop=t,void(document.body.scrollTop=n))}function o(){var t=e.style.height;i();var o=window.getComputedStyle(e,null);if(o.height!==e.style.height?"visible"!==d&&n("visible"):"hidden"!==d&&n("hidden"),t!==e.style.height){var r=document.createEvent("Event");r.initEvent("autosize:resized",!0,!1),e.dispatchEvent(r)}}var r=void 0===arguments[1]?{}:arguments[1],s=r.setOverflowX,a=void 0===s?!0:s,u=r.setOverflowY,c=void 0===u?!0:u;if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!e.hasAttribute("data-autosize-on")){var l=null,d="hidden",p=function(t){window.removeEventListener("resize",o),e.removeEventListener("input",o),e.removeEventListener("keyup",o),e.removeAttribute("data-autosize-on"),e.removeEventListener("autosize:destroy",p),Object.keys(t).forEach(function(n){e.style[n]=t[n]})}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",p),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",o),window.addEventListener("resize",o),e.addEventListener("input",o),e.addEventListener("autosize:update",o),e.setAttribute("data-autosize-on",!0),c&&(e.style.overflowY="hidden"),a&&(e.style.overflowX="hidden",e.style.wordWrap="break-word"),t()}}function i(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:destroy",!0,!1),e.dispatchEvent(t)}}function o(e){if(e&&e.nodeName&&"TEXTAREA"===e.nodeName){var t=document.createEvent("Event");t.initEvent("autosize:update",!0,!1),e.dispatchEvent(t)}}var r=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(r=function(e){return e},r.destroy=function(e){return e},r.update=function(e){return e}):(r=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return n(e,t)}),e},r.destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},r.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),t.exports=r})},,,function(e,t){}]);